# 3장 기본적인 도구

## 일반 텍스트의 힘

요구사항을 지식으로 수집하고 그 지식을 설계, 구현, 테스트, 그리고 문서에 표현합니다. 

이때, 이 지식을 저장하는 최고의 포맷이 일반 텍스트라고 믿습니다.

### 🤔  일반 텍스트란?

사람이 직접 읽고 이해할 수 있는 형태의 인쇄가능한 문자로 이루어진 텍스트를 말합니다.

비구조적이아닌 XML, HTML같이 잘 정의 된 구조를 가진 텍스트도 좋은 예입니다.

이진 포맷을 가지고 할 수 있었던 모든 것을 일반 텍스트로 할 수 있습니다.

대부분의 이진 포맷이 가진 문제는 데이터를 이해하는 데 필요한 맥락이 데이터 자신으로부터 분리되어 있다는 점인데 일반 텍스트를 사용하면 애플리케이션에 상관없이 어떤 의미인지 자명한 데이터 흐름을 얻을 수 있습니다.

```
📌 지식을 일반 텍스트로 저장하라.
```

### 단점

- 압축된 이진 포맷을 사용하는 것보다 많은 공간을 차지합니다.
- 일반 텍스트 파일을 해석하고 터리하는 데에 더 많은 계산이 필요할 수 있습니다.

🤔 이런 단점이 있는데도 일반 텍스트를 사용하는 이유는 무엇인가요?

### 장점

- **구식이 되는 것에 대한 보험**
    
    → 어떤 다른 형태의 데이터와 그걸 생성한 애플리케이션보다 더 오래 살아남을 것입니다.
    
    → `사람이 읽을 수 있는`과 `사람이 이해할 수 있는` 사이에는 차이가 있습니다.
    
- **호환성**
    
    → 컴퓨팅 세계의 거의 모든 도구들은 일반 텍스트를 다룰 수 있습니다.
    
- **더 쉬운 테스트**
    
    → 시스템 테스르르 구동하게 할 합성 테디터를 만들기 위해 일반 텍스트를 사용한다면, 특별한 도구를 만들어야 할 필요없이 간단히 테스트 데이트를 추가, 업데이트, 수정할 수 있습니다.
    

## 조개 놀이

모든 작업을 GUI로만 한다면, 컴퓨팅 환경의 전체 능력을 이용하지 못하게 됩니다.

일반적인 작업을 자동화할 수 없고, 쓸 수 있는 도구의 풀파워를 사용할 수도 없습니다.

GUI의 장점은 WYSIWYG(What You See Is What You Get) 이고, 단점은 WYSIAYG(Wath You See Is All You Get) 입니다.

```
📌 명령어 셸의 힘을 사용하라.
```

셸에 익숙해지는데 약산의 에너지를 투자하고 셸에 익숙해지면 생산성이 급상승하는 것을 알게 될 것입니다.

## 파워 에디팅

에디팅 환경에서 최대한을 이끌어 내개 도와줄 수 있는 몇 가지 일반적인 기능을 소개합니다.

1. **하나의 에디터**
    
    ```
    📌 하나의 데이터를 잘 사용하라.
    ```
    
    - 에디터 하나를 골라 완전히 마스터하고, 모든 편집 작업에 그 에디터를 사용해야 합니다.
    - 선택한 에디터가 사용하는 모든 플렛폼에서 가능한지 확인해야 합니다.
2. **에디터의 기능**
    - 설정변경 가능
    - 확장 가능
    - 프로그램 가능
    - 구문 강조
    - 자동 완성
    - 자동 들여쓰기
    - 코드나 문서 상용어구 지원
    - 관련 도움말 시스템
    - IDE 기능(컴파일, 디버그 등)
3. **생산성**
    - 일반적인 작업을 능률적으로 하는데 도움을 줍니다.(자동 들여쓰기, 자동 템플릿 제공 ...)

## 소스코드 관리

소스코드 관리 시스템은 일종의 거대한 UNDO 키와 같습니다. 

소스코드 시스템은 소스코드나 문서 관련의 모든 변화를 기억하는데, 좋은 것들은 컴파일러나 OS 버전까지 기억하기에 적절히 설정한다면 **소프트웨어의 이전 버전으로 언제든 되돌아 갈 수 있습니다.**

또한, 버그 추적, 감사, 퍼포먼스, 품질 관리 목적으로 귀중히 쓰일 정보도 얻을 수 있습니다.

- 릴리스 구분
- 개발 브랜치 구분
- 아카이브
- 두 사람 이상 동시 작업

```
📌 언제나 소스코드 관리 시스템을 사용하라.
```

모든 것이 소스코드 관리 아래에 있도록 해야합니다. 우리가 타이프하는 거의 모든 것에 대해 일상적으로 소스코드 관리 시스템을 사용해야 합니다.

### 소스코드 관리와 빌드

프로젝트 빌드 메커니즘은 제품 빌드가 자동화되고 그것을 반복할 수 있게 되는 것입니다. 

이는 빌드를 자동화하는 것에 일관성을 보장합니다.

## 디버깅

소프트웨어 결함은 요구사항을 오해하는 것에서 코딩에러에 이르기까지 여러 모습으로 나타납니다.

### 디버깅의 심리

```
📌 비난 대신 문제를 해결하라.
```

디버깅은 단지 문제 해결이라는 사실을 포용하고, 그 방식을 공략해야 합니다. 비난은 멈춰야 합니다.

### 디버깅 사고방식

디버깅을 시작하기에 앞서 올바른 사고방식을 갖는 것은 중요합니다.

한 발짝 뒤로 물러나 무엇이 자신으로 하여금 버그가 있을 것이라고 생각하게 하는지, 원인이 무엇일지 실제로 생각해 보는 것이 정말 중요합니다.

항상 문제의 근본적인 원인을 발견하려고 노력하고, 그 문제의 특정한 증상만 고치려 하면 안 됩니다.

### 디버깅 시작하는 법

버그를 살피기 전 깨끗이 컴파일도니 경고문 없는 코드로 작업하는지 확인하고 어떤 문제건 해결을 하기위한 관련 자료를 모두 모아야 합니다.

또한, 자세한 정보를 충분히 얻기 위해서 해당 버그를 보고한 사용자가 실제로 시연하는 것을 지켜볼 필요가 있습니다.

- 처음에 받은 자료 이상을 얻기 위해선 버그를 보고한 사용자를 인터뷰할 필요도 있습니다.
- 인공 테스트는 애플리케이션을 충분히 테스트하지 못합니다. 경계 조건과 실제 최종사용자 사용 패턴 모두를 철저히 테스트 해야 합니다.

### 디버깅 전략

1. **데이터를 가시화 하라**
    - 데이터와 데이터들 사이에 존재하는 모든 상호관계를 시각화할 수 있는 디버거를 사용하면 데이터에 대한 통찰을 얻을 수 있습니다.
2. **트레이싱**
    - 동시 프로세스, 실시간 시스템, 이벤트 기반 애플리케이션 등, 시간 자체가 중요한 요소가 되는 시스템에서 값을  메길 수 없을 정도로 귀중합니다.
    - 트레이스 메시지는 규칙적이고 일관된 형식이어야 합니다.
3. **고무 오리**
    - 누군가에게 문제를 설명하게 되면 혼자 코드를 살펴볼 때는 당연히 여기고 지나갈 것을 명시적으로 이야기해야 하기에 문제에 대한 새로운 통찰을 별안간 얻을 수 있습니다.
4. **제거 과정**
    - 자신의 실수일 수 있는 일을 시스템의 문제라고 비난하는 것은 최대한 피해야 합니다.
    
    ```
    📌 'select'는 망가지지 않았다.
    ```
    
    - OS는 아마 망가지지 않았고 데이터베이스도 아마 괜찮을 것입니다.
    - 업그레이드를 고려할 때 일정을 살펴야 합니다.

### 버그에 대해서..

버그를 찾을 때는 애지중지 맏고 있던 진실을 재평가해야 합니다.

버그에 대한 루틴이나 코드가 제대로 작동한다고 '안다'고 해서 대충 얼버무려 지나치지 말고 증명해야 합니다.

```
📌 가정하지 마라. 증명하라.
```

버그를 마주치면 고치는 것을 넘어서, 실패가 더 일찍 발견되지 않았을 까 생각해볼 필요가 있습니다.

또한, 버그를 미리 잡을 수 있도록 단위 테스트나 다른 테스트를 수정할 필요가 있는지 고려해야 합니다.

동일한 버그가 있을 여지가 있는 코드는 같이 고치는 편이좋습니다.

버그를 수정하는데 오랜 시간이 걸린다면 왜 그런지 자문해야 합니다.

버그나 누군가가 내린 잘못된 가정의 결과라면, 문제를 전체 팀과 함께 토론해야 합니다. 한 사람이 오해했다면 여러 사람이 그럴 수 있다는 이야기 입니다.

### 디버깅 체크 리스트

- 보고된 문제가 내재하는 버그의 직접적 결광니가 아니면 단순히 증상일뿐인가?
- 버그가 정말로 컴파일러에 있나? OS에? 혹은 여러분 코드에 있나?
- 이 문제를 동료에게 상세히 설명한다면 어떻게 말하겠는가?
- 의심가는 코드가 단위 테스트를 통과한다면, 테스트는 충분히 완전한 것인가? 이 데이터로 단위 테스트를 돌린다면 우슨 일이 생기는가?
- 이 버그를 야기한 조건이 시스템의 다른 곳에도 존재하는가?

## 텍스트 처리

중요한 기반 기술로 재빨리 유틸리티를 만들어 낼 수 있고, 아이디러를 프로토타입해 볼 수 있는 언어를 텍스트 처리 언어를 익혀야 합니다. 만약 전통적인 언어를 사용한다면 다섯 배에서 열 배 가까이 더 오래 결립니다.

```
📌 텍스트 처리 언어를 하나 익혀라.
```

- 데이터베이스 스키마 관리
- 자바 속성 액세스
- 테스트 데이터 생성
- 서적 집필
- C에서 오브젝트 파스칼 인터페이스로
- 웹 문서 생성

## 코드 생성기

똑같은 기능을 좀 다른 맥락에서 필요로 할 때, 같은 정보를 다른 여러 곳에서 반복해야 할 때 코드 생성기를 사용하면 효과적입니다.

```
📌  코드를 작성하는 코드를 작성하라.
```

1. **수동적 코드 생성기**
    - 결과를 내기 위해 한 번만 실행
    - 타이핑을 줄여줌
    - 기본적으로 몇 개의 입력에서 주어진 출력을 생성하는 매개 변수화된 템플릿
    - 용도
        
        → 새 소스 파일 생성, 프로그램 언어간 일회용 변화 수행, 런타임에 계산 어려운 참조 테이블과 자원 생성
        
2. **능동적 코드 생성기**
    - 코드 생성이 필요할 때마다 실행
    - DRY 원칙을 따르고 싶다면 필수적 사용
    - 지식을 단 하나의 형태로만 만들어놓고 필요시 온갖 형식으로 변환(중복 x)

코드 생성기는 복잡할 필요없이 입력 형식을 단순하게 만들면, 코드 생성기도 단순해집니다.

또한, 코드 생성기가 꼭 코드를 생성해야 할 필요없이 원하는 어떤 결과물을 얻고자 할 때에 사용할 수 있습니다.