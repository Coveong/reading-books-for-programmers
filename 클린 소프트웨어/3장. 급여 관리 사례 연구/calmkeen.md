# 3. 급여관리 사례 연구



## 13. 커맨드와 액티브 오브젝트 패턴

대부분의 클래스는 한 벌의 메소드와 그에 대응하는 변수 집합을 결합하는데, 커맨드 패턴은 그렇지 않다. 오히려 함수를 캡슐화해서 변수에서 해방시킨다.

커맨드 패턴은 명령의 **개념**을 캡슐화함으로써 연결된 장치에서 시스템의 논리적인 상호 연결을 분리해 낼수 있게 했다.



## 트랜잭션



커맨드 패턴의 일반적 사용 방법이자 유요하게 쓸수 있는 방법은 트랜잭션의 생성과 실행에 관련되어 있다.
직원들의 데이터베이스를 관리하는 시스템을 작성하고 있다고 생각해 보자.

db이용 추가 삭제 변경등을 이용할수 있다.

시스템은 정보에 따라 문벅적으로 의미적으로 옳은지 검증을 한다. 

이때 커맨드 패턴이

- 검증되지 않은 데이터를 위한 저장소 역할
- 검증 메소드 구현
- 트랜잭션을 실행하는 메소드 구현

을 해낸다.



## 물리적, 시간적 분리

위 방식을 이용할 떄 장점

- 데이터를 받는 코드와 그 데이터를 검증
- 작업을 하는 코드 , 업무 객체 그자체를 극적으로 분리



### 시간적 분리

데이터를 받으면 메소드를 즉시 호출할 이유는 없다.  트랜잭션 객체는 목록에 저장되어 검증되고 나중에 실행될수 있는데 그 시점에서 명령이 옳은지 검증한후 지정에 실행 같은 일을 커맨드 패턴은 가능하게 해준다.



### 액티브 오브젝트 패턴

이 패턴은 다중 제어 스레드구현을 위한 기법이다.

여러가지 수천개의 산업 시스템에서 단순 멀티태스킹의 핵심부가 되어 왔다.



## 결론

커맨드 패턴의 유연성은 패턴의 단순성과는 어울리지 않을정도로 트랜잭션, 장치제어, 멀티쓰레드의 시스템의 핵심, GUI에서 실행/취소 관리 등에 이르기 까지 용도가 다양하다.

커맨드 패턴은 함수를 클래스보다 강조하기 때문에 객체 지향 패러다임을 망가뜨린다고 생각되었지만 현장에서는 아주 유용하게 쓰인다.



## 14. 템플릿메소드와 스트래터지 패턴: 상속과 위임

템플릿 메소드는 문제를 해결하기 위해 상속을 사용하는 반면, 스트레터지는 위임을 사용한다.



### 템플릿 메소드 패턴

일반적인 알고리즘은 기반 클래스에 있고, 다른 구체적인 내용에서 상속된다. 그러나 이 기법은 비요을 수반한다. 상속은 아주 강한 관계여서, 파생 클래스는 필연적으로 기반 클래스에 묶이게 된다.



### 스트래터지 패턴

스트래티지 패턴은 템플릿 메서드 패턴에 비해 한 가지 특별한 이점을 제공한다. 템플릿 메서드 패턴이 일반적인 알고리즘으로 많은 구체적인 구현을 조작할 수 있게 해주는 반면, DIP를 완전히 따르는 스트래터지 패턴은 각각의 구체적인 구현이 다른 많은 일반적인 알고리즘에 의해 조작될 수 있게 해준다.



### 결론

템플릿 메소드와 스트래터지 패턴 모두 상위 단게의 알고리즘을 하위 단계의 구체적인 부분으로 부터 분리해주는 역할을 한다. 

약간의 복잡성, 메모리, 실행 시간을 더 감내하면 스트래터지는 구체적인 부분이 상위 단계 알고리즘으로부터 독립적으로 재사용될 수 있게까지 해준다.



## 15. 퍼사드와 미디에이터 패턴



### 퍼사드 패턴

복잡하고 일반적인 인터페이스를 가진 객체 그룹에 간단하고 구체적인 인터페이스를 제공하고자 할 떄 사용한다.

퍼사드 패턴 사용은 모든 데이터베이스 호출이 DB를 통과해야 한다는 규정을 채택했다는 사실을 내포한다.



### 미디에이터 패턴

자신의 정책을 은밀하고 강제적이지 않은 방식으로 적용



### 결론

정책 적용이 크고 가시적이어야 하는 경우에는 퍼사드를, 교묘함과 재량이 필요한 경우에는 미디에이터가 더 나은 선택이 될 것이다.

퍼사드는 보통 어떤 규정의 중심이 되며, 모든 사람은 그 아래에 있는 객체들이 아니라 이 퍼사드를 사용하기로 합의한다.

미디에이터는 사용자에게 감춰져 있다. 이것의 정책은 규정의 문제라기보다는 기정사실이다.



