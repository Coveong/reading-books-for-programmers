# 애자일 설계

# 애자일 설계란 무엇인가?

## 설계와 악취: 부패하고 있는 소프트웨어의 냄새

1. 경직성: 변경하기 어려움
1. 취약성: 관련 없는 부분이 망가지기 쉬움
1. 부동성: 재사용하기 어려움
1. 점착성: 제대로 동작하기 어려움
1. 불필요한 복잡성: 과도한 설계
1. 불필요한 반복: 단일 추상 개념으로 통합이 가능함
1. 불투명성: 혼란스러운 표현

## 애자일 팀은 소프트웨어가 부패하도록 내버려두지 않는다.

시스템의 설계를 가능한 단순하게 유지하고 테스트로 뒷받침한다. 각 반복마다 개선한다.

만약 소프트웨어의 설계가 요구사항 변경 때문에 퇴화한다면, 우리는 애자일 방식대로 하고 있지 않은 것이다.

## 가능한 좋은 상태로 설계 유지하기

설계는 명료한 상태로 유지되어야 하고 설계의 가장 중요한 표현인 소스 코드 역시 명료한 상태로 유지되어야 한다.

## 결론

애자일 설계는 과정이지 결과가 아니다.

모든 시점에서 시스템의 설계를 가능한 한 간단하고, 명료하고, 표현적으로 유지하려는 노력이다.

# 단일 책임 원칙(SRP)

> 한 클래스는 단 한 가지의 변경 이유만을 가져야 한다.

응집도라고도 불린다.

## 책임이란 무엇인가?

SRP의 맥락에서 우리는 책임을 변경을 위한 이유로 정의한다.

불필요한 복잡성: 책임이 두 가지 이상이 아니라면 굳이 분리할 필요는 없다. 변경의 축은 변경이 실제로 일어날 때만 변경의 축이다.

## 결론

SRP는 가장 간단한 원칙 중 하나이지만 동시에 제대로 적용하기 가장 어려운 원칙 중 하나다.

# 개방 폐쇄 원칙 (OCP)

> 소프트웨어 개채는 확장에 열려 있어야 하고 수정에는 닫혀 있어야 한다.

> 모든 시스템은 생명주기 동안에 변화한다. 이것은 개발 중인 시스템이 첫 번째 버전보다 오래 남길 원한다면 반드시 염두에 두어야 할 사실이다.

by 이바르 야콥슨

## 상세 설명

1. 확장에 대해 열려 있다.
  * 이는 모듈의 행위가 확장될 수 있음을 의미한다. 요구사항이 변경되었을 때 변경에 맞게 새로운 행위를 추가할 수 있다.
2. 수정에 대해 닫혀 있다.
  * 어떤 모듈의 행위를 확장하는 것이 그 모듈의 소스 코드나 바이너리 코드의 변경을 초래하지 않는다.
  
## 해결책은 추상화다

모듈은 고정된 추상화에 의존하기 때문에 수정에 대해 닫혀 있을 수 있다. 

그 모듈의 행위는 추상화의 새 파생 클래스들을 만듦으로써 확장이 가능하다.

## 예상과 자연스러운 구조

폐쇄는 완벽할 수 없기 때문에 전략적이어야 한다.

즉, 설계자는 자신의 설계에서 닫혀 있는 변경의 종류를 선택해야 한다.

## 올가미 놓기

변경을 촉진하는 법:
1. 테스트를 먼저 작성한다.
1. 아주 짧은 주기로 개발한다.
1. 기반구조보다 기능 요소를 먼저 개발하고 자주 이 기능 요소를 이해당사자에게 보여준다.
1. 가장 중요한 기능 요소를 먼저 개발한다.
1. 소프트웨어를 빨리, 그리고 자주 릴리즈한다.

## 결론

OCP를 따르면 객체 지향 기술에서 당연하게 요구되는 최상의 효용을 낳는다.

단, 어설픈 추상화를 피하는 일은 추상화 자체만큼이나 중요하다.
