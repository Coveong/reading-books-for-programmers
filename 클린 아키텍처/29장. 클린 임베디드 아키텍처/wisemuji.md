# 클린 임베디드 아키텍처

> 소프트웨어는 닳지 않지만, 펌웨어와 하드웨어에 대한 의존성을 관리하지 않으면 안으로부터 파괴될 수 있다.

어떻게 하면 임베디드 소프트웨어 아키텍처를 깔끔하게 유지할 수 있는지, 그래서 소프트웨어가 유용하게 살아남을 가능성을 높일 수 있는지를 살펴보자.

## 앱-티튜드 테스트

'동작하게 하라'는 활동만을(+ '빠르게 만들어라' 라는 목표) 염두에 두고 작성한 임베디드 시스템 소프트웨어는 펌웨어로 변할 가능성이 높다.

임베디드 소프트웨어 뿐만 아니라 대다수의 앱들도 코드를 올바르게 작성해서 유효 수명을 길게 늘리는 데는 거의 관심 없이, 동작하는데에만 집중한다.

앱이 동작하도록 만드는 것을 저자는 개발자용 앱-티튜드 테스트라고 부른다.
앱-티튜드 테스트를 통과한다고 해서 클린 임베디드 아키텍처를 가진다고 할 수는 없다.

## 타깃-하드웨어 병목현상

임베디드 코드가 클린 아키텍처 원칙과 실천법을 따르지 않고 작성된다면 대개의 경우 코드를 테스트할 수 있는 환경이 해당 특정 타깃으로 국한될 것이다.

그리고 그 타깃이 테스트가 가능한 유일한 장소라면 타깃-하드웨어 병목현상이 발생하여 진척이 느려질 것이다.

### 클린 임베디드 아키텍처는 테스트하기 쉬운 임베디드 아키텍처다

몇 가지 아키텍처 원칙을 임베디드 소프트웨어와 펌웨어에 적용하여 타깃-하드웨어 병목현상을 줄이는 방법을 알아보자.

* 소프트웨어가 펌웨어가 서로 섞이지 않도록 계층을 분리하자
* 하드웨어, 프로세서, 운영체제는 세부사항이므로 경계를 분명하게 만들어야 한다.
* 인터페이스를 통하고 대체 가능성을 높이는 방향으로 프로그래밍하라
* DRY 원칙: 조건부 컴파일 지시자를 반복하지 말라

# 결론

클린 임베디드 아키텍처는 제품이 장기간 생명력을 유지하는 데 도움을 준다.
