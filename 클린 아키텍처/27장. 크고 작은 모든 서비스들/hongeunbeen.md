# 27장. '크고 작은 모든' 서비스들

서비스 지향 아키텍처는 최근에 큰 인기를 끌고 있습니다.

- 서비스를 사용하면 상호 결합이 철저하게 분리되는 것처럼 보이기 때문입니다.
- 서비스를 사용하면 개발과 배포 독립서을 지원하는 것처럼 보이기 때문입니다.

하지만, 이 두 이유는 일부만 맞는 말입니다.

# 서비스 아키텍처?

시스템의 아키텍처는 의존성 규칙을 준수하며 고수준의 정책을 저수준의 세부사항으로부터 분리하는 경계에 의해 정의됩니다.

그러나 서비스 그 자치로는 아키텍처를 정의하지는 않습니다.

결국 서비스는 프로세스나 플랫폼 경계를 가로지르는 함수 호출에 지나지 않습니다.

# 서비스의 이점?

**결합 분리의 오류**

시스템을 서비스들로 분리함으로써 얻게 되는 이점 하나는 서비스 사이의 결합이 확실히 분리된다는 것입니다.

인터페이스가 잘 정의되어 있어야 한다는 이점에 대해서라면 이는 명백히 사실이지만 프로세서 내의 또는 네트워크 상의 공유 자원때문에 결합될 가능성은 여전히 존재합니다.

**개발 및 배포 독립성의 오류**

서비스를 사용함에 따라서 예측되는 또 다른 이점은 전담팀이 서비스를 소유하고 운영한다는 점입니다.

데브옵스 전략의 일환으로 전담팀에서 각 서비스를 작성하고, 유지보수하며, 운영하는 책임을 질 수 있습니다.

즉, 개발 및 배포 독립성이 확장 가능한 것으로 간주됩니다.

하지만 대규모 엔터프라이즈 시스템은 서비스 기반 말고 다른 방법으로도 확장가능하기에 서비스는 확장 가능한 시스템을 구축하는 유일한 선택지가 아닙니다.

또한, `결합 분리의 오류`에 따르면 서비스라고 해서 항상 독립적으로 개발하고, 배포하며, 운영할 수 있는 것은 아닙니다.

# 객체가 구출하다

SOLID 설계 원칙에 따르면, 다형적으로 확장할 수 있는 클래스 집합을 생성해 새로운 기능을 처리하도록 함을 알 수 있습니다.

즉, 기존 컴포넌트들에 있는 추상 기반 클래스를 템플릿 메서드나 전략 패턴 등을 이용해서 오버라이드하여 결합을 분리하고 독립적으로 개발해 배포할 수 있습니다.

# 컴포넌트 기반 서비스

🤔  그럼, 서비스에도 이렇게 SOLID 설계 원칙을 적용할 수 있나요?

→ 예, 서비스가 반드시 소규모 단일체여야 할 이유는 없습니다.

서비스는 SOLID 설계 원칙대로 설계가 가능하며 컴포넌트 구조를 갖출 수도 있습니다.

이를 통해 서비스 내의 기존 컴포넌트들을 변경하지 않고도 새로운 컴포넌트를 추가할 수 있습니다.

→ 다시 말해 새로운 기능을 추가하는 행위가 개발 폐쇄 원칙을 준수하게 됩니다.

# 횡단 관심사

즉, 아키텍처 경계가 서비스 사이에 있지 않습니다!

오히려 서비스를 관통하며, 서비스를 컴포넌트 단위로 분할합니다.

모든 주요 시스템이 직면하는 횡단 관심사 처리를 위해 서비스 내부는 의존성 규칙도 준수하는컴포넌트 아키텍처로 설계하며 이 서비스들을 시스템의 아키텍처 경계를 정의하지 않아야 합니다.

아키텍처 경계를 정의하는 것은 서비스 내에 위치한 컴포넌트입니다.

# 결론

📌  서비스는 시스템의 확작성과 개발 가능성 측면에서 유용하지만, 그 자체로는 아키텍처적으로 그리 중요한 요소는 아닙니다.

📌  시스템의 구성 요소가 통신하고 실행되는 물리적인 메커니즘에 의해 아키텍처가 정의되는 것이 아닙니다.

📌  서비스는 단 하나의 아키텍처 경계로 둘러싸인 단일 컴포넌트로 만들 수 있습니다.
