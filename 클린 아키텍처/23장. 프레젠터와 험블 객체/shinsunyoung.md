# 23장. 프레젠터와 험블 객체

# 험블 객체 패턴

디자인 패턴의 한 종류로, 테스트하기 어려운 행위와 테스트하기 쉬운 객체를 분리하기 쉽게 하는 방법

1. 행위들을 두 개의 모듈 또는 클래스로 나눈다.
    - 이 모듈 중 하나가 험블이다.
2. 가장 기본적인 본질은 남기고, 테스트하기 어려운 행위를 모두 험블 객체로 옮긴다.
3. 나머지 모듈에는 험블 객체에 속하지 않은, 테스트하기 쉬운 행위를 모두 옮긴다.

예를 들어 GUI의 경우 ...

1. 행위들을 두 개로 나눈다. (테스트하기 어려운(험블)/쉬운) 행위
2. 테스트하기 어려운 (각 요소가 필요한 위치에 적절히 표시되었는지 검사하는 테스트) 행위는 험블 객체로 옮긴다.
3. 나머지는 테스트 하기 쉬운 행위(GUI에서 수행하는 행위의 대다수)로 옮긴다.

험블 객체 - 뷰 / 험블 객체가 아닌 객체 - 프레젠터

# 프레젠터와 뷰

- 뷰
    - 험블 객체이다.
    - 테스트하기 어렵다.
    - **이 객체에 포함된 코드는 가능한 간단하게 유지한다.**
- 프레젠터
    - 테스트하기 쉽다.
    - 테스트를 비교적 복잡하게 다룬다.

→ 뷰는 뷰 모델 데이터를 화면으로 로드하는 역할만 가진다. 

# 테스트와 아키텍처

험블 객체 패턴을 사용하면 경계가 정의된다. 

# 데이터베이스 게이트웨이

유스케이스 인터랙터 - DB 사이에는 DB 게이트웨이가 존재한다.

이 게이트웨이는 다형적 인터페이스로 애플리케이션이 데이터베이스에 수행하는 생성, 조회, 갱신, 삭제 작업과 관련된 모든 메서드를 포함한다.

# 데이터 매퍼

ORM은 사실 존재하지 않는다. 왜냐하면 객체는 데이터 구조가 아니기 때문이다.

이러한 ORM 시스템은 데이터베이스 계층에 위치해야 한다. 게이트웨이 인터페이스와 데이터베이스 사이에서 일종의 또 다른 험블 객체 경계를 형성한다.

# 결론

각 아키텍처 경계마다 경계 가까이에 숨어있는 험블 객체 패턴을 발견할 수 있다. 경계를 넘나드는 통신은 거의 모두 간단한 데이터 구조를 수반할 때가 많고, 대개 그 경계는 테스트하기 어려운 무언가와 테스트하기 쉬운 무언가로 분리될 것이다.

그리고 이러한 아키텍처 경계에서 험블 객체 패턴을 사용하면 전체 시스템의 테스트 용이성을 크게 높일 수 있다.