# 23장. 프레젠터와 험블 객체

# 험블 객체 패턴

디자인 패턴으로, 테스트하기 어려운 행위와 테스트하기 쉬운 행위를 단위 테스트 작성자가 분리하기 쉽게 하는 방법입니다.

가장 기본적인 본질은 남기고, 테스트 하기 어려운 행위를 험블 객체로 옯겨 두 개의 모듈로 나눕니다.

# 프레젠터와 뷰

- 뷰 : 테스트하기 어려운 험블 객체

    → 데이터를 GUI로 이동시키지만, 데이터를 직접 처리하지는 않습니다.

- 프레젠터 : 테스트 하기 쉬운 객체

    → 데이터를 받아 화면에 표현할 수 있는 포맷으로 만들어 뷰는 데이터를 화면에 전달하는 간단한 일만 처리하도록 만듭니다.

화면에 표시되고 애플리케이션에서 어느 정도 제어할 수 있는 요소라면 무조건 뷰 모델 내부에 문자여르 불, 또는 열거형 형태로 표현됩니다.

뷰는 뷰 모델의 데이터를 화면에 로드할 뿐, 이 외에 뷰가 맡은 역할을 없습니다.

# 테스트와 아키텍처

험블 객체 패턴은 행위를 테스트하기 쉬운 부분과 테스트하기 어려운 부부능로 분리하면 아키텍처 경계가 정의되기 때문에 테스트 용이성에 있어 좋은 예입니다.

프레젠터와 뷰 사이의 경계는 이러한 경계 중 하나입니다.

# 데이터베이스 게이트웨이

유스케이스 인터랙터, 데이터베이스 사이에는 데이터베이스 게이트웨이가 위치합니다.

다형적 인터페이스로, 애플리케이션이 DB에 수행하는 생성, 조회, 갱신, 삭제 같은 모든 메서드를 포함합니다.

유스케이스 계층은 SQL을 허용하지 않기때문에 유스케이스 계층은 필요한 메서드를 제공하는 게이트웨이 인터페이스를 호출합니다.

이때 이 구현체는 DB계층에 위치하며 험블 객체입니다.

하지만 이와 달리 인터팩터는 애플리케이션에 특화된 업무 규칙을 캡슐화하기 때문에 험블 객체가 아닙니다.

# 데이터 매퍼

객체 관계 매퍼(ORM)은 사실 존재하지 않습니다.

→ 사용자 관점에서 볼 떄 객체는 단순히 오퍼레이션의 집합입니다.

객체와 달리 데이터 구조는 함축된 행위를 가지지 않는 데이터 변수의 집합이므로 ORM보다는 차라리 데이터 매퍼라고 부르는 편이 좋습니다.

(관계형 데이터베이스 테이블로부터 가져온 데이터를 데이터 구조에 맞게 담아주기 때문입니다.)

ORM 시스템은 DB 계층에 위치해야 하고 실제로 ORM은 게이트웨이 인터페이스와 DB 사이에서 일종의 또 다른 험블 객체 경계를 형성합니다.

# 서비스 리스너

애플리케이션은 데이터를 간단한 데이터 구조 형태로 로드한 후, 이 데이터 구조를 경계를 가로질러서 특정 모듈로 전달합니다.

# 결론

📌경계를 넘나드는 통신은 거의 모두 간단한 데이터 구조를 수단하고 이 경계는 테스트하기 어려운 무언가와 테스트하기 쉬운 무언가로 분리되는데 이떄 아키텍처 경계에서 험블 객체 패턴을 사용하면 전체 시스템의 용이성을 크게 높일 수 있습니다.