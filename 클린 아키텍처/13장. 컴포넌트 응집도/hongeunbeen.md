# 13장. 컴포넌트 응집도

컴포넌트란? 시스템의 구성요소로 배포할 수 있는 가장 작은 단위입니다.

🤔 그럼, 어떤 클래스를 어느 컴포넌트에 포함시켜야 하나요?

→ 어떤 클래스를 어느 컴포넌트에 포함시킬지 결정하는 원칙(컴포넌트 응집도)이 있습니다.

# 컴포넌트 응집도

- REP : 재사용/릴리스 등가 원칙
- CCP: 공통 패쇄 원칙
- CRP : 공통 재사용 원칙

## REP : 재사용/릴리스 등가 원칙

```
재사용 단위는 릴리스 단위와 같다.
```

소프트웨어 컴포넌트가 릴리스 절차를 통해 추적 관리되어 재사용 가능한 컴포넌트를 보증합니다.

소프트웨어 설계와 아티텍처 관점에서 보면 단일 컴포넌트는 응집성 높은 클래스와 모듈들로 구성되어야 합니다. 

→ 컴포넌트를 구성하는 모든 모듈은 서로 공유하는 중요한 테마나 목적이 있어야 합니다.

하나의 컴포넌트로 묶인 클래스롸 모듈은 반드시 함께 릴리스할 수 있어야 합니다.

즉, 하나의 컴포넌트로 묶인 클래스와 모듈은 

- 버전 번호가 같아야 합니다.
- 동일한 릴리스로 추적 관리되어야 합니다.
- 동일한 릴리스 문서에 포함되어야 합니다.

# CCP : 공통 패쇄 원칙

```
동일한 이유로 동일한 시점에 변경되는 클래스를 같은 컴포넌트로 묶어라. 
서로 다른 시점에 다른 이유로 변경되는 클래스는 다른 컴포넌트로 분리하자.
```

이 원칙은 단일 책임 원칙을 컴포넌트 관점에서 다시 쓴 것입니다.

단일 컴포넌트는 변경의 이유가 여러개 있어서는 안됩니다.

유지보수성은 재사용성보다 훨씬 중요하기에 코드가 변경된다면 해당 컴포넌트가 재배포하면 되므로 변경 모두가 단일 컴포넌트에서 발생하는 편이 좋습니다.

변경될 가능성이 있는 클래스는 모두 한곳으로 묶을 것을 권장합니다. 물리적 또는 개념적으로 강하게 결합되어 항상 함께 변경되는 클래스들은 하나의 컴포넌트에 속해야 릴리스, 재검증, 배포일과 관련된 작업량을 최소화 할 수 있습니다.

동일한 유형의 변경에 대해 닫혀 있는 클래스들을 하나의 컴포넌트로 묶음으로써 OCP에서 얻은 교훈을 확대 적용합니다.

### SRP와의 유사성

```
동일한 시점에 동일한 이유로 변경되는 것들을 한데 묶어라. 
서로 다른 시점에 다른 이유로 변경되는 것들은 서로 분리하라.
```

# CRP : 공통 재사용 원칙

```
컴포넌트 사용자들을 필요하지 않는 것에 의존하게 강요하지 말라.
```

클래스와 모듈을 어느 컴포넌트에 위치시킬지 결정할 때 도움되는 원칙입니다.

재사용으로 인해 상호작용하는 클래스들이 동일한 컴포넌트에 포함되어 컴포넌트 내부에서 클래스들 사이에 수많은 의존성이 있으리라고 예상할 수 있습니다.

컨테이너 클래스와 해당 클래스의 이터레이터 클래스는 강하게 결합되어 있어 함께 재사용됩니다.

→ 반드시 동일한 컴포넌트에 위치해야 합니다.

💡 CRP는 동일한 컴포넌트로 묶어서는 안되는 클래스도 알려줍니다.

강하게 결합되지 않는 클래스들을 동일한 컴포넌트에 위치시켜서는 안됩니다.

다른 컴포넌트의 클래스를 한 개를 사용하든 여러개를 사용하든 의존성은 약해지지 않습니다.

→ 의존하는 컴포넌트가 있다면 해당 컴포넌트의 모든 클래스에 대해 의존함을 확실히 인지해야 합니다.

### ISP와의 관계

CRP는 인터페이스 분리 원칙의 포괄적인 버전입니다.

```
필요하지 않는 것에 의존하지 말라.
(ISP : 사용하지 않은 메서드가 있는 클래스에 의존하지 말라)
(CRP : 사용하지 않는 클래스를 가진 컴포넌트에 의존하지 말라)
```

# 컴포넌트 응집도에 대한 균형 다이어그램

응집도에 관한 세 원칙은 서로 상충합니다.

🤔그럼 어디에 중점을 두어야 하나요?

→ REP와 CRP에만 중점을 두면, 사소한 변경이 너무 많은 컴포넌트에 영향을 미칩니다.

→ REP와 CCP에만 중점을 두면, 불필요한 릴리스가 너무 빈번해집니다.

뛰어난 아키텍처라면, 개발팀이 현재 관심을 기울이는 부분을 충족시키는 위치를 찾아야 합니다.

🤔시간이 흐르면서 개발팀이 주의를 기울이는 부분이 변하게 된다면요?

→ 개발 가능성이 재사용성보다 중요하기 때문에 프로젝트 초기에는 CCP가 REP보다 중요합니다. 

일반적으로 프로젝트는 삼각형의 오른쪽에서 시작해 왼쪽으로 이동해 갑니다.

# 결론

📌컴포넌트 응집도에 관한 세 가지 원칙은 응집도가 가질 수 있는 훨씬 복잡한 다양성을 설명해 줍니다.

📌컴포넌트로 만들지 결정할 때, 재사용성, 개발가능성을 반드시 고려해야 합니다.