# 28장. 테스트 경계

# 시스템 컴포넌트인 테스트

1. 테스트는 태생적으로 의존성 규칙을 따른다. 
    - 의존성은 항상 테스트 대상이 되는 코드를 향한다. 테스트는 원의 가장 바깥쪽에 위치해있다.
    - 시스템 내부의 어떤 것도 테스트에 의존하지 않는다.
2. 독립적으로 배포 가능하다.
3. 시스템 컴포넌트 중에서 가장 고립되어 있다.

# 테스트를 고려한 설계

테스트가 시스템의 설계와 잘 통합되지 않으면, 테스트는 깨지기 쉬워지고, 시스템은 뻣뻣해져서 변경하기가 어려워진다.

설계할 때 테스트를 고려해서 설계해야한다. 특히 GUI는 변동성이 크다. 테스트를 할 때 GUI를 테스트하면 안 된다.

# 테스트 API

테스트 API는 테스트를 애플리케이션으로부터 분리할 목적으로 사용한다. 단순히 UI에서 분리하는 것만이 아닌, 테스트 구조를 애플리케이션 구조로부터 결합을 분리하는 게 목표다.

## 구조적 결합

테스트 API의 역할은 애플리케이션의 구조를 테스트로부터 숨기는 데 있다. 구조적 결합이 강하면 필수적인 진화 과정을 방해할뿐만 아니라, 상용 코드의 범용성과 유연성이 충분히 좋아지지 못하게 막는다.

## 보안

보안에 취약할 수도 있다. 이를 대비하기 위해 테스트 API 자체와 테스트 API 중 위험한 부분의 구현부는 독립적으로 배포할 수 있는 컴포넌트로 분리해야 한다.

# 결론

테스트는 시스템 외부에 있지 않다. 오히려 시스템의 일부다. 테스트는 잘 설계 돼야만 한다.