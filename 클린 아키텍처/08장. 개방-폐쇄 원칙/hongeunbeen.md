# 08μ¥. κ°λ°©-νμ‡„ μ›μΉ™

# κ°λ°©-νμ‡„ μ›μΉ™μ΄λ€?(OCP)

κΈ°μ΅΄ μ½”λ“λ¥Ό μμ •ν•κΈ°λ³΄λ‹¤λ” λ°λ“μ‹ μƒλ΅μ΄ μ½”λ“λ¥Ό μ¶”κ°€ν•λ” λ°©μ‹μΌλ΅ μ‹μ¤ν…μ ν–‰μ„λ¥Ό λ³€κ²½ν•  μ μλ„λ΅ μ„¤κ³„ν•΄μ•Όλ§ μ†ν”„νΈμ›¨μ–΄ μ‹μ¤ν…μ„ μ‰½κ² λ³€κ²½ν•  μ μλ‹¤λ” κ²ƒμ΄ μ΄ μ›μΉ™μ μ”μ§€μ…λ‹λ‹¤.

**μ†ν”„νΈμ›¨μ–΄ κ°μ²΄λ” ν™•μ¥μ—λ” μ—΄λ ¤ μμ–΄μ•Ό ν•κ³ , λ³€κ²½μ—λ” λ‹«ν€ μμ–΄μ•Ό ν•λ‹¤.**

μ¦‰, μ†ν”„νΈμ›¨μ–΄ κ°μ²΄μ ν–‰μ„λ” ν™•μ¥ν•  μ μμ–΄μ•Ό ν•μ§€λ§, μ΄λ• κ°μ²΄λ¥Ό λ³€κ²½ν•΄μ„λ” μ• λ©λ‹λ‹¤.

π¤” OCPλ” κ·ΈλΌ ν΄λμ¤μ™€ λ¨λ“μ„ μ„¤κ³„ν•  λ•λ§ λ„μ›€λλ” μ›μΉ™ μΈκ°€μ”?

β†’ μ•„λ‹μ”! μ¤νλ ¤ μ•„ν‚¤ν…μ² μ»΄ν¬λ„νΈ μμ¤€μ—μ„ OCPλ¥Ό κ³ λ ¤ν•  λ• ν μ”¬ μ¤‘μ”ν• μλ―Έλ¥Ό κ°€μ§‘λ‹λ‹¤.

# μ‚¬κ³  μ‹¤ν—

μ†ν”„νΈμ›¨μ–΄ μ•„ν‹°ν…μ²κ°€ ν›λ¥­ν•λ‹¤λ©΄ λ³€κ²½λλ” μ½”λ“μ μ–‘μ΄ κ°€λ¥ν• ν• μµμ†ν™” λμ–΄μ•Ό ν•©λ‹λ‹¤.

μ΄μƒμ μΈ λ³€κ²½λ‰μ€ 0!!

π¤―λ³€κ²½λ‰μ΄ 0μ΄λΌλ‹... μ–΄λ–»κ² ν•λ©΄ λ κΉμ”?

- μ„λ΅ λ‹¤λ¥Έ λ©μ μΌλ΅ λ³€κ²½λλ” μ”μ†λ¥Ό μ μ ν•κ² λ¶„λ¦¬(SRP)
- μ”μ† μ‚¬μ΄μ μμ΅΄μ„±μ„ μ²΄κ³„ν™”(DIP)

β†’ μ΄ λ‘ λ²•μΉ™μ„ λ”°λ¥΄λ©΄ λ³€κ²½λ‰μ„ μµμ†ν™” ν•  μ μμµλ‹λ‹¤.

μ¬λ¬΄μ¬ν‘λ¥Ό μ›Ή νμ΄μ§€λ΅ λ³΄μ—¬μ£Όλ” μ‹μ¤ν…μ— μ”κµ¬μ‚¬ν•­μ΄ μ¶”κ°€λμ–΄ λ³€κ²½μ„ ν•΄λ³΄κ² μµλ‹λ‹¤.

μ΄λ•, λ³€κ²½λ‰μ„ μµμ†ν™”ν•΄μ„ λ³€κ²½μ„ μ§„ν–‰ν•κ² μµλ‹λ‹¤.π†

### SRP μ μ©ν•κΈ°

![image/heb_image1.jpeg](image/heb_image1.jpeg)

SRPλ¥Ό μ μ©ν•΄ λ°μ΄ν„° νλ¦„μ„ λ§λ“¤μ—μµλ‹λ‹¤.

κ·Έλ¦Όμ—μ„ λ³Ό μ μλ“―μ΄ λ³΄κ³ μ„ μƒμ„±μ΄ λ‘ κ°μ μ±…μ„μΌλ΅ λ¶„λ¦¬κ°€ λ©λ‹λ‹¤.! 

- λ³΄κ³ μ„μ© λ°μ΄ν„°λ¥Ό κ³„μ‚°ν•λ” μ±…μ„
- μ΄ λ°μ΄ν„°λ¥Ό μ›ΉμΌλ΅ λ³΄μ—¬μ£Όκ±°λ‚ μΆ…μ΄λ΅ ν”„λ¦°νΈν•κΈ°μ— μ ν•©ν• ν•νƒλ΅ ν‘ν„ν•λ” μ±…μ„

μ΄λ ‡κ² μ±…μ„μ΄ λ¶„λ¦¬λλ©΄ ν•λ‚μ—μ„ λ³€κ²½μ΄ μΌμ–΄λ‚λ„ λ‹¤λ¥Έ ν•λ‚λ” λ³€κ²½μ΄ μ• λλ‹ 

- μ†μ¤ μ½”λ“ μμ΅΄μ„± ν™•μ‹¤ν• μ΅°μ§ν™”
- μƒλ΅ μ΅°μ§ν™”ν• κµ¬μ΅°μ—μ„ ν–‰μ„ ν™•μ¥ μ‹ λ³€κ²½ λ°μƒν•μ§€ μ•μ€ λ³΄μ¥

μ΄λ° λ©μ λ“¤μ΄ ν•„μ”ν•©λ‹λ‹¤.

### μ²λ¦¬ κ³Όμ • ν΄λμ¤ λ‹¨μ„ λ¶„ν™, ν΄λμ¤ μ»΄ν¬λ„νΈ λ‹¨μ„ λ¶„λ¦¬

SRPλ΅ μΈν• λ©μ λ“¤μ„ λ‹¬μ„± μ„ν•΄

- μ²λ¦¬ κ΄€μ • β†’ ν΄λμ¤ λ‹¨μ„λ΅ λ¶„ν• 
- λ¶„ν• λ ν΄λμ¤λ¥Ό μ»΄ν¬λ„νΈ λ‹¨μ„λ΅ κµ¬λ¶„

ν•΄μ•Ό ν•©λ‹λ‹¤..!!

κ·ΈλΌ λ¶„ν• κ³Ό κµ¬λ¶„μ„ ν•΄ λ³΄κ² μµλ‹λ‹¤.

![image/heb_image2.png](image/heb_image2.png)

μ΄λ ‡κ² ν΄λμ¤λ΅ λ¶„ν•  ν• λ‹¤μ, ν΄λμ¤λ“¤μ„ μ»΄ν¬λ„νΈ λ‹¨μ„λ΅ κµ¬λ¶„ν–μµλ‹λ‹¤.

μ΄ λ„¤ κ°€μ§€ μ»΄ν¬λ„νΈκ°€ μ΅΄μ¬ν•©λ‹λ‹¤.

- `Controller`
- `Interactor`
- `Database`
- `Presenter`, `View`

π’΅  μ£Όλ©ν•΄μ•Ό ν•  μ μ€ μμ΅΄μ„±μ΄ μ†μ¤ μ½”λ“ μμ΅΄μ„±μ„ λ‚νƒ€λƒ…λ‹λ‹¤.

β†’ `FinanacialDataMapper`λ” κµ¬ν„ κ΄€κ³„λ¥Ό ν†µν•΄ `FinanacialDataGateway`λ¥Ό μ•κ³  μμ§€λ§, `FinanacialDataGateway`λ” `FinanacialDataMapper`μ— λ€ν•΄ μ•„λ¬΄κ²ƒλ„ λ¨λ¦…λ‹λ‹¤.

![image/heb_image3.png](image/heb_image3.png)

π’΅  μ£Όλ©ν•΄μ•Ό ν•  μ μ€ μ΄μ¤‘μ„ μ€ ν™”μ‚΄ν‘μ™€ μ¤μ§ ν• λ°©ν–¥μΌλ΅λ§ κµμ°¨ν•©λ‹λ‹¤.

β†’ λ¨λ“  μ»΄ν¬λ„νΈ κ΄€κ³„λ” λ‹¨ λ°©ν–¥μΌλ΅ μ΄λ£¨μ–΄μ§„λ‹¤λ” λ»μ…λ‹λ‹¤. ν™”μ‚΄ν‘λ” λ³€κ²½μΌλ΅λ¶€ν„° λ³΄νΈν•λ ¤λ” μ»΄ν¬λ„νΈλ¥Ό ν–¥ν•κ² κ·Έλ ¤μ§‘λ‹λ‹¤.

![image/heb_image4.png](image/heb_image4.png)

### μ»΄ν¬λ„νΈ κ΄€κ³„

μ»΄ν¬λ„νΈλ“¤μ κ΄€κ³„μ— λ€ν•΄μ„ λ” μμ„Έν μ•μ•„λ³΄κ² μµλ‹λ‹¤.

![image/heb_image5.jpeg](image/heb_image5.jpeg)

μ—¬κΈ°μ„, μ£Όμν• μ μ€ A μ»΄ν¬λ„νΈμ—μ„ λ°μƒν• λ³€κ²½μΌλ΅λ¶€ν„° B μ»΄ν¬λ„νΈλ¥Ό λ³΄νΈν•λ ¤λ©΄ λ°λ“μ‹ A μ»΄ν¬λ„νΈκ°€ B μ»΄ν¬λ„νΈμ— μμ΅΄ν•΄μ•Ό ν•©λ‹λ‹¤.

- `Presenter`μ—μ„ λ°μƒν• λ³€κ²½μΌλ΅ `Controller`λ¥Ό λ³΄νΈν•κ³ μ ν•λ‹¤λ©΄
- `View`μ—μ„ λ°μƒν• λ³€κ²½μΌλ΅λ¶€ν„° `Presenter`λ¥Ό λ³΄νΈν•κ³ μ ν•λ‹¤λ©΄
- `Interator`λ” λ‹¤λ¥Έ λ¨λ“  κ²ƒμ—μ„ λ°μƒν• λ³€κ²½μΌλ΅λ¶€ν„° λ³΄νΈν•κ³ μ ν•λ‹¤λ©΄

μ–΄λ–»κ² ν•΄μ•Ό ν• κΉμ”?

1. `Presenter`μ—μ„ λ°μƒν• λ³€κ²½μΌλ΅ `Controller`λ¥Ό λ³΄νΈν•κ³ μ ν•λ‹¤λ©΄

    `Presenter` μ»΄ν¬λ„νΈκ°€ `Controller`μ— μμ΅΄ν•΄μ•Ό ν•©λ‹λ‹¤.

    ![image/heb_image6.png](image/heb_image6.png)

2. `View`μ—μ„ λ°μƒν• λ³€κ²½μΌλ΅λ¶€ν„° `Presenter`λ¥Ό λ³΄νΈν•κ³ μ ν•λ‹¤λ©΄

    `View` μ»΄ν¬λ„νΈκ°€ `Presenter`μ— μμ΅΄ν•΄μ•Ό ν•©λ‹λ‹¤.

    ![image/heb_image7.png](image/heb_image7.png)

3. `Interator`λ” λ‹¤λ¥Έ λ¨λ“  κ²ƒμ—μ„ λ°μƒν• λ³€κ²½μΌλ΅λ¶€ν„° λ³΄νΈν•κ³ μ ν•λ‹¤λ©΄

    π¤” μ—‡, μ΄λ¶€λ¶„μ€ μ–΄λ–»κ² ν•΄κ²°ν•΄μ•Ό ν•λ‚μ”?

    μΌλ‹¨, `Interator`λ” OCPλ¥Ό κ°€μ¥ μ μ¤€μν•  μ μλ” κ³³μ— μ„μΉν•©λ‹λ‹¤.

    β†’ `Database`, `Contorller`, `Presenter`, `Veiw`μ—μ„ λ°μƒν• μ–΄λ–¤ λ³€κ²½λ„ `Interator`μ— μν–¥μ„ μ£Όμ§€ μ•κΈ° λ•λ¬Έμ…λ‹λ‹¤.

    π¤”  κ·ΈλΌ μ™, `Interator`μ€ νΉλ³„ν• μ„μΉμ— μλ‚μ”?

    λ°”λ΅ `Interator`κ°€ μ—…λ¬΄ κ·μΉ™μ„ ν¬ν•¨ν•κΈ° λ•λ¬Έμ…λ‹λ‹¤. μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ κ°€μ¥ λ†’μ€ μμ¤€μ μ •μ±…μ„ ν¬ν•¨ν•κ³  `Interator` μ΄μ™Έμ μ»΄ν¬λ„νΈλ” λ¨λ‘ μ£Όλ³€μ μΈ λ¬Έμ λ¥Ό μ²λ¦¬ν•©λ‹λ‹¤. κ°€μ¥ μ¤‘μ”ν• λ¬Έμ λ” `Interator`  κ°€ λ‹΄λ‹Ήν•©λ‹λ‹¤.

μ΄ μ„Έ κ°€μ§€λ¥Ό μ‚΄ν΄λ³΄λ©΄ μ°λ¦¬λ” μ»΄ν¬λ„νΈ κ³„μΈµ κµ¬μ΅°μ— λ€ν•΄ μ• μ μμµλ‹λ‹¤.

### μ»΄ν¬λ„νΈ κ³„μΈµ κµ¬μ΅°

- `Interator` β†’ `Controller` λ¶€μμ 
- `Controller` β†’ `Presenter`μ™€ `View`μ— λΉ„ν•΄ μ¤‘μ‹μ μΈ λ¬Έμ  λ‹¤λ£Έ
- `Presenter` β†’ `View`μ— λΉ„ν•΄ μ¤‘μ‹¬μ μΈ λ¬Έμ  λ‹¤λ£Έ

**'λ³΄νΈ'μ™€ 'κ³„μΈµκµ¬μ΅° μμ¤€'μ€ μ„λ΅ μ—°κ΄€μ΄ λ©λ‹λ‹¤.**

β†’ κ°€μ¥ λ†’μ€ μμ¤€μ κ°λ…(`Interator`)μ΄λ©΄ μµκ³ μ λ³΄νΈλ¥Ό λ°›κ³  κ°€μ¥ λ‚®μ€ μμ¤€μ κ°λ… μ¤‘ ν•λ‚(`View`)μ΄λ©΄ κ±°μ λ³΄νΈλ¥Ό λ°›μ§€ λ»ν•©λ‹λ‹¤.

μ•„ν‚¤ν…μ² μμ¤€μ—μ„ OCPκ°€ λ™μ‘ν•λ” λ°©μ‹μΌλ΅ μ•„ν‚¤ν…νΈλ” κΈ°λ¥μ΄ μ–΄λ–»κ², μ™, μ–Έμ  λ°μƒν•λ”μ§€μ— λ”°λΌ κΈ°λ¥μ„ λ¶„λ¦¬ν•κ³ , λ¶„λ¦¬ν• κΈ°λ¥μ„ μ»΄ν¬λ„νΈμ κ³„μΈµκµ¬μ΅°λ΅ μ΅°μ§ν™” ν•©λ‹λ‹¤.

κ²°λ΅ μ€, μ €μμ¤€ μ»΄ν¬λ„νΈμ—μ„ λ°μƒν• λ³€κ²½μΌλ΅λ¶€ν„° κ³ μμ¤€ μ»΄ν¬λ„νΈλ¥Ό λ³΄νΈν•  μ μμµλ‹λ‹¤.π‘

# λ°©ν–¥μ„± μ μ–΄

![image/heb_image8.png](image/heb_image8.png)

μ΄ λ¶€λ¶„μ„ λ³΄λ©΄  `FinancialDataGateway` μΈν„°νμ΄μ¤λ” `FinancialReportGenerator`μ™€ `FinancialDataMapper` μ‚¬μ΄μ— μ„μΉν•©λ‹λ‹¤.

λ°”λ΅ μμ΅΄μ„±μ„ μ—­μ „ μ‹ν‚¤κΈ° μ„ν•΄μ„μ…λ‹λ‹¤.! 

λ§μ•½, `FinancialDataGateway` μΈν„°νμ΄μ¤κ°€ μ—†λ‹¤λ©΄ μμ΅΄μ„±μ΄ `Interator` μ»΄ν¬λ„νΈμ—μ„ `Database` μ»΄ν¬λ„νΈλ΅ λ°”λ΅ ν–¥ν•κ² λλ” λ¶μƒμ‚¬κ°€ λ°μƒν•κ² λ©λ‹λ‹¤.π¤―

# μ •λ³΄ μ€λ‹‰

![image/heb_image9.png](image/heb_image9.png)

π¤” κ·ΈλΌ μ΄ μΈν„°νμ΄μ¤λ„ μμ΅΄μ„± μ—­μ „ μ‹ν‚¤κΈ° μ„ν•¨μΈκ°€μ”?

β†’ μ•„λ‹μ”! μ΄ `FinancialRepoertRequester` μΈν„°νμ΄μ¤λ” λ°©ν–¥μ„± μ μ–΄μ™€λ” λ‹¤λ¥Έ λ©μ μ…λ‹λ‹¤.

μ†ν”„νΈμ›¨μ–΄ μ—”ν‹°ν‹°λ” 'μμ‹ μ΄ μ§μ ‘ μ‚¬μ©ν•μ§€ μ•λ” μ”μ†μ—λ” μ λ€λ΅ μμ΅΄ν•΄μ„λ” μ• λλ‹¤' λΌλ” μ†ν”„νΈμ›¨μ–΄ μ›μΉ™μ„ μ§€ν‚¤κΈ° μ„ν•΄ μ΅΄μ¬ν•λ”λ°μ”

`Controller`μ—μ„ λ°μƒν• λ³€κ²½μΌλ΅λ¶€ν„° `Interator`μ„ λ³΄νΈν•κ³  λ°λ€λ΅ `Interator`μ—μ„ λ°μƒν• λ³€κ²½μΌλ΅ λ¶€ν„° `Controller`λ„ λ³΄νΈλκΈ°λ¥Ό λ°”λλ‹λ‹¤! κ·Έλμ„ `Interator` λ‚΄λ¶€λ¥Ό μ€λ‹‰ν•©λ‹λ‹¤.

# κ²°λ΅ 

OCPλ” μ‹μ¤ν…μ μ•„ν‚¤ν…μ²λ¥Ό λ– λ°›μΉλ” μ›λ™λ ¥ μ¤‘ ν•λ‚μ…λ‹λ‹¤.

OCPμ λ©ν‘λ” μ‹μ¤ν…μ„ ν™•μ¥ν•κΈ° μ‰¬μ΄ λ™μ‹μ— λ³€κ²½μΌλ΅ μΈν•΄ μ‹μ¤ν…μ΄ λ„λ¬΄ λ§μ€ μν–¥μ„ λ°›μ§€ μ•λ„λ΅ ν•λ”λ° μμµλ‹λ‹¤.

- μ‹μ¤ν…μ„ μ»΄ν¬λ„νΈ λ‹¨μ„λ΅ λ¶„λ¦¬
- μ €μμ¤€ μ»΄ν¬λ„νΈμ—μ„ λ°μƒν• λ³€κ²½μΌλ΅λ¶€ν„° κ³ μμ¤€ μ»΄ν¬λ„νΈλ¥Ό λ³΄νΈν•  μ μλ” ν•νƒμ μμ΅΄μ„± κ³„μΈµ κµ¬μ΅°