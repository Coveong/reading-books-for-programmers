# 19장. 정책과 수준

소프트웨어 시스템이란 정책을 기술한 것입니다. 

소프트웨어 아키텍처를 개발하는 기술에는 이러한 정책을 신중하게 분리하고, 정책이 변경되는 양상에 따라 정책을 재편성하는 일도 포함됩니다. 

흔히 아키텍처 개발은 재편성된 컴포넌트들을 비순환 방향 그래프로 구성하는 기술을 포함하는데 

- 그래프에서 정점은 동일한 수준의 정책을 포함하는 컴포넌트에 해당됩니다.
- 방향이 있는 간선은 컴포넌트 사이의 의존성을 나타냅니다.
- 간선은 다른 수준에 위치한 컴포넌트를 서로 연결합니다.

위에서 본 컴포넌트 사이의 의존성은 소스 코드, 컴파일 타임의 의존성입니다. 

이 의존성은 컴파일러가 제대로 동작하기 위해 필요합니다.

좋은 아키텍처라면 각 컴포넌트를 연결할 때 의존성의 방향이 컴포넌트의 수준을 기반으로 연결되도록 만들어야 합니다.

🤔그럼, 컴포넌트 수준이란 뭔가요?

# 수준

수준은 입력과 출력까지의 거리입니다. 

즉, 시스템의 입력과 출력 모두로부터 멀리 위치할수록 정책의 수준은 높아지고 입력과 출력을 다루는 정책이라면 시스템에서 최하위 수준에 위치합니다.

위 예제를 보면 입력과 출력에서 가장 멀리 떨어져 있기에 번역 컴포넌트가 최고 수준의 컴포넌트 입니다. 

이 예제에서 주의할 점은 데이터 흐름과 소스 코드 의존성이 같은 방향을 가리키지 않는 다는 사실입니다.

→ 소스 코드 의존성은 그 수준에 따라 결합되어야하며, 데이터 흐름을 기준으로 결합되어서는 안됩니다.

🤔  그럼, 정책을 컴포넌트로 붂는 기준은 무엇인가요?

→ 정책을 컴포넌트로 묶는 기준은 정택이 변경되는 방식에 달려있습니다.

단일 책임 원칙과 공통 패쇄 원칙에 따르면 동일한 이유로 동일한 시점에 변경되는 정책은 함께 묶이게 됩니다.

모든 소스 코드 의존성의 방향이 고수준 정책을 향할 수 있도록 정택을 분리했다면 변경의 영향도를 줄일 수 있습니다.

→ 저수준 컴포넌트가 고수준 컴포넌트에 플러그인이 되어야 합니다.