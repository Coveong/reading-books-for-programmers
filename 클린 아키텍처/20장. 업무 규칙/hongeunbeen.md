# 20장. 업무 규칙

애플리케이션을 업무 규칙과 플러그인으로 구분하기 위해서 업무 규칙에 대해 잘 이해해야 합니다.

업무 규칙이란

사업적으로 수익을 얻거나 비용을 줄일 수 있는 규칙 또는 절차입니다.

즉, 컴퓨터상으로 구현했는지와 상관없이, 업무 규칙을 사업저그올 수익을 얻거나 비용을 주일 수 있어야 합니다.

사람이 하든 컴퓨터가 하든 하등의 관계가 없는 것을 `핵심 업무 규칙`이라고 합니다.

사업 자체에 핵심적이며, 규칙을 자동화하는 시스템이 없더라도 업무 규칙은 그대로 존재하기 때문입니다.

이 핵심 업무 규칙은 보통 `데이터`를 요구하는데 이 데이터를 `핵심 업무 데이터`로 부르고 이러한 데이터는 시스템으로 자동화되지 않는 경우에도 존재하는 데이터입니다.

`핵심 규칙 + 햄심데이터` 이 둘은 본질적으로 결합되어 `객체`로 만드는데 이러한 유형의 객체를 `엔티티`라고 부릅니다.

# 엔티티

컴퓨터 시스템 내부의 객체로서, 핵심 업무 데이터를 기반으로 동작하는 일련의 조그만 핵심 업무 규칙을 구체화합니다.

엔티티 객체는 핵심 업무 데이터를 직접 포함하거나 핵심 업무 데이터에 쉽게 접근할 수 있고 

엔티티의 인터페이스는 핵심 업무 데이터를 기반으로 동작하는 핵심 업무 규칙을 구현한 함수들로 구성됩니다.

![](image/heb_image1.heic)

- 업무에서 핵심적인 개념을 구현하는 소프트웨어
- 구축 중인 자동화시스템의 나머지 모든 고려사항

엔티티는 위와 같이 분리됩니다.

엔티티는 순전히 업무에 대한 것이며, 이외의 것은 없어야 합니다.

유일한 요구조건은 핵심 업무 데이터와 핵심 업무 규칙을 하나로 묶어서 별도의 소프트웨어 모듈로 만들어야 합니다.

# 유스케이스

유스케이스는 자동화된 시스템이 사용되는 방법을 설명합니다.

- 사용자가 제공해야 하는 입력
- 사용자에게 보여줄 출력
- 해당 출력을 생성하기 위한 처리 단계

엔티티 내의 핵심 업무 규칙과는 반대로 애플리케이션에 특화된 업무 규칙을 설명합니다. 즉, 엔티티 내부의 핵심 업무 규칙을 어떻게, 그리고 언제 호출할지를 명시하는 규칙을 담습니다.

유스케이스는 사용자 인터페이스를 기술하지 않습니다!! 이점은 중요한데 유스케이스는 시스템이 사용자에게 어떻게 보이는지를 설명하지 않습니다.🤯

이보다는 애플리케이션에 특화된 규칙을 설명하며, 이를 통해 사용자와 엔티티 사이의 상호작용를 규정합니다.

즉, 시스템에서 데이터가 들어오고 나가는 방식은 유스케이스와는 무관합니다.

![](image/heb_image2.heic)

유스케이스는 객체입니다.

→ 애플리케이션에 특화된 업무 규칙을 구현하는 하나 이상의 함수를 제공합니다.

엔티티와 같은 고수준 개념은 유스케이스와 같은 저수준 개념에 대해 알지 못하지만 유스케이스는 고수준인 엔티티에 대해 알고 있습니다.

🤔   **왜 유스케이스는 저수준인데 엔티티는 고수준 인가요?**

→ 유스케이스 : 단일 애플리케이션에 특화되어 있으며, 해당 시스템의 입력과 출력에 가깝게 위치합니다.

→ 엔티티 : 수많은 다양한 애플리케이션에서 사용될 수 있도록 일반화되어 있으며, 각 시스템의 입력이나 출력에서 더 멀리 떨어져 있습니다.

유스케이스는 엔티티에 의존하지만 엔티티는 유스케이스에 의존하지 않습니다.

# 요청 및 응답 모델

유스케이스는 입력 데이터를 받아 출력 데이터를 생성하는데 제대로 구성된 유스케이스 객체라면 데이터를 사용자나 또 다른 컴포넌트와 주고 받는 방식에 대해서는 몰라야 합니다.

유스케이스는 단순한 요청 데이터 구조를 입력으로 받아들이고, 단순한 응답 데이터 구조를 출력으로 반환해 데이터 구조는 어떤 것에도 의존하지 않아야 합니다. `HttpRequest` `HttpResponse` 같은 표준 프레임워크 인터페이스로부터 파생되지 않습니다.

의존성을 제거하는 일은 중요합니다. 엔티티와 요청/응답 모델은 상당히 많은 데이터를 공유하므로 결합하고 싶지만 두 객체의 목적은 완전히 다르다는 것을 기억해야 합니다.

# 결론

📌  업무 규칙은 소프트웨어 시스템이 존재하는 이유입니다.

📌  업무 규칙은 핵심적인 기능입니다.

📌  업무 규칙은 수익을 내고 비용을 줄이는 코드를 수반합니다.

📌  업무 규칙은 집압의 가보입니다.

📌  업무 규칙은 저수준의 관심사로 인해 오염되어서는 안 되며, 원래 그대로의 모습으로 남아 있어야 합니다.

📌  업무 규칙은 시스템에서 가장 독립적이며 가장 많이 재사용할 수 있는 코드여야 합니다.

이상적으로는 업무 규칙을 포함하는 코드는 반드시 시스템의 심장부에 의치해야 하고 덜 중요한 코드는 심장부에서 플러그인 되어야 합니다.