# 8장 경계

외부 코드 사용시 외부 코드를 우리 코드에 깔끔하게 통합해야 함

→ 소프트웨어 경계를 깔끔하게 처리하는 기법과 기교 중요!

## 외부 코드 사용하기

패키지 제공자나 프레임워크 제공자는 적용성을 최대한 넓히려 함

사용자는 자신의 요구에 집중하는 인터페이스를 바람

→ 이런 인터페이스 제공자와 인터페이스 사용자 사이의 긴장으로 인해 경계에서 문제 발생 가능성 

경계인터페이스 (Map) 이용 시 이를 이용하는 클래스나 클래스 계열 밖으로 노출되지 않도록 주의!

## 경계 살피고 익히기

외부 패키기 테스트는 사용자의 책임이 아니지만 코드를 테스트하는 편이 바람직하다

외부 코드 사용 방법

- 하루나 이틀 문서를 읽으며 사용법을 결정
- 우리쪽 코드를 작성해 라이브러리가 예상대로 동작하는지 확인

외부 코드는 통합하기도 익히기도 어려움 

→ 우리쪽 코드를 작성해 외부 코드를 호출하는 대신 먼저 테스트 작성해 외부 코드 익히는 방법 추천

→ 학습 테스트!

- 프로그램에서 사용하려는 방식대로 외부 API를 호출 ( API 사용 목적에 초점)
- 통제된 환경에서 API를 제대로 이해하는지 확인 테스트

## 학습 테스트는 공짜 이상이다

- 필요한 지식만 확보하는 손쉬운 방법
- 이해도를 높여주는 정확한 실험
- 공짜 이상
- 투자하는 노력보다 얻는 성과가 더 큼
- 패키지 새 버전이 나와도 차이점 빠르게 캐치 가능 → 새 버전이 호환 X 시 학습 테스트가 사실 바로 밝힘

→ 실제 코드와 동일한 방식으로 인터페이스 사요하는 테스트 케이스가 필요

- 패키지의 새 버전으로 이전 위해

## 아직 존재하지 않는 코드를 사용하기

경계와 관련해 또 다른 유형

- 아는 코드
- 모르는 코드

 → 모르는 코드의 구현은 나중으로 미루고 이것에 대한 자체적인 인터페이스 구현

- 인터페이스를 전적으로 통재 장점
- 코드 가독성 높아짐
- 코드 의도 분명

## 깨끗한 경계

- 통제하지 못하는 코드 사용 시 너무 많은 투자, 비용 터지지 않도록 주의
- 경계에 위치하는 코드는 깔끔히 분리
- 기대치 정의하는 테스트 케이스 작성
- 통제 불가능한 외부 패키지에 의존 대신 통제 가능한 우리 코드에 의존
- 외부 패키지를 호출하는 코드 깜싸 우리가 원하는 인터페이스 패키지가 제공하는 인터페이스로 변환
    - 외부 패키지 변경 시 변경할 코드 줄어듬