# 단위 테스트

애자일과 TDD 덕분에 단위 테스트를 자동화하는 프로그래머들이 많아졌으며 점점 더 늘어나고 있다. 
하지만 이렇게 테스트를 추가하려고 급하게 서두르는 와중에 많은 프로그래머들이 제대로 된 테스트 케이스를 작성해야 한다는 사실이 간과되고 있다.

## TDD 법칙 세가지
1. 실패하는 단위 테스트를 작성하기 전까지 실제 코드를 작성하지 않는다.
1. 컴파일은 실패하지 않으면서 실행이 실패하는 정도로만 단위 테스트를 작성한다.
1. 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다.

이렇게 작성하면 실제 코드와 맞먹을 정도로 방대한 테스트 코드가 나오는데 이는 때로는 심각한 관리 문제를 유발하기도 한다.

## 깨끗한 테스트 코드 유지하기
테스트 코드는 실제 코드 못지 않게 중요하다. 사고와 설계와 주의가 필요하며 실제 코드 못지 않게 깨끗하게 짜야 한다.

### 테스트는 유연성, 유지보수성, 재사용성을 제공한다.
테스트 케이스가 없다면 모든 변경이 잠정적인 버그다. 하지만 테스트 커버리지가 높을수록 버그에 대한 공포는 줄어들고 오히려 안심하고 아키텍처와 설계를 개선할 수 있다.
또 깨끗한 테스트 코드를 만들기 위해선 가독성이 제일 중요하다.

### 도메인에 특화된 테스트 언어

### 이중 표준
테스트 코드에서는 확실하고, 간결하고, 표현력이 풍부해야 하지만 실제 코드만큼 효율적일 필요는 없다.

### 테스트 당 assert 하나
결론이 하나라서 코드를 이해하기 쉽고 빠르다. 하지만 때로는 주저 없이 함수 하나에 여러 assert 문을 넣기도 한다.
(어쩌면 테스트 당 '개념 하나'라는 말이 더 좋을 수도 있겠다)
이것저것 잡다한 개념을 연속으로 테스트하는 긴 함수는 피한다.

# F.I.R.S.T
깨끗한 테스트는 다음 다섯 가지 규칙을 따르는데, 각 규칙에서 첫 글자를 따오면 FIRST가 된다.
* 빠르게 Fast - 테스트는 빠르게 돌아야 한다.
* 독립적으로 Independent - 각 테스트는 서로 의존하면 안된다.
* 반복가능하게 Repeatable - 테스트는 어떤 환경에서도 반복 가능해야 한다.
* 자가검증하는 Self-validating - 테스트는 bool 값으로 결과를 내야 한다.
* 적시에 Timely - 테스트는 적시에 작성해야 한다. 테스트하려는 실제 코드를 구현하기 직전에 구현한다.

# 결론
테스트 코드가 방치되어 망가지면 실제 코드도 망가진다. 테스트 코드를 깨끗하게 유지하자.
