# 1장. 코드 정리법

# 1. 보호 구문

- if문을 중첩해서 쓰지 말고 분리하라
    
    ```java
    // bad
    if (조건)
      if (다른 조건 부정)
    
    // good 
    if (조건 부정) return
    if (다른 조건) return
    ```
    
- 단, 보호 구문을 남용하지는 마라
- 항상, 그리고 반드시 작은 단계를 거쳐 코드를 정리하라
- [https://github.com/Bogdanp/dramatiq/pull/470/files](https://github.com/Bogdanp/dramatiq/pull/470/files)

# 2. 안 쓰는 코드

- 지워라
- 확신이 없다면 로그를 활용해라
- 대신 한 번의 정리과정에는 코드를 조금만 삭제하는 것이 복구에 용이하다

# 3. 대칭으로 맞추기

- 한 가지 방식으로 선택해서 코드를 맞춰라

# 4. 새로운 인터페이스로 기존 루틴 부르기

- 기존 인터페이스 때문에 루틴을 호출하기 어렵다면 새로 구현해서 호출하라
    - 새로 만드는 인터페이스는 기존 인터페이스를 호출하는 것으로 구현할 수 있다 (통로 인터페이스)
- 통로 인터페이스와 비슷한 느낌 받기
    - 거꾸로 코딩하기
    - TDD
    - Helper 설계

# 5. 읽는 순서

- 코드를 읽기 좋은 순서로 정렬하라
- 선언 순서가 달라지면 실행 결과가 달라지는 경우가 있으니 주의하라
- 되도록 전체 파일의 순서 대신에 읽는 순서가 영향을 크게 주는 것들부터 바꿔라

# 6. 응집도를 높이는 배치

- 두 루틴의 결합도가 있으면 서로 옆에 두어 응집도를 높여라
- 결합도 제거가 가능하면 가는게 가장 좋다
    - 결합도 제거 비용 + 변경 비용 < 결합도에 따른 비용 + 변경 비용

# 7. 선언과 초기화를 함께 옮기기

- 초기화를 변수 선언 근처로 이동시켜라
- 두려움을 느끼지 않을만큼 작은 단계로 작업하라

# 8. 설명하는 변수

- 전체에서 일부 표현식을 추출하고, 표현식의 의도가 드러나도록 변수 이름을 만들어 할당하라
- 코드 정리 커밋, 동작 변경 커밋은 분리해야 한다.

# 9. 설명하는 상수

- 상징적인 상수를 만들어라. 리터럴 상수로 사용된 곳은 상징적인 상수로 바꿔라

# 10. 명시적인 매개변수

- 일부 데이터가 명시적으로 전달되지 않는다면?
    - 루틴을 나누고, 앞부분에는 매개변수 값을 채우고 뒷부분에는 전달하게 바꿔라
- 매개변수를 명시적으로 드러나게 만든 다음, 함수를 연쇄적으로 호출할 수 있게 준비하라

# 11. 비슷한 코드끼리

- 기능 구분이 되면 부분 사이에 빈 줄을 넣어 분리하라
- 관련 있는 코드를 뭉쳐두어라

# 12. 도우미 추출

- 루틴 코드 중에 목적이 분명하고 나머지 코드와는 상호작용이 적은 코드는 분리하여 helper로 이름을 지어라
    - 이 때 이름은 작동 방식이 아니라 목적에 따라 지어야 한다.
    
    ```java
    // before
    routine()
      // 그대로 두는 코드 
      // 바꾸려는 코드
      // 그대로 두는 코드 
    
    // after
    helper()
      // 바꾸려는 코드
    routine()
      // 그대로 두는 코드 
      helper()
      // 그대로 두는 코드 
    ```
    
- 시간적 결합을 표햔하는 경우 메서드를 합쳐라
    
    ```java
    // before
    foo.a()
    foo.b()
    
    // after
    ab()
      a()
      b()
    ```
    

# 13. 하나의 더미

- 필요한 만큼의 코드를 하나로 모은 뒤 깔끔하게 정리하라
- 찾아볼 증사들
    - 길고 반복되는 인자 목록
    - 반복되는 코드, 반복되는 조건문
    - 부적절한 네이밍
    - 공유되어 변경에 노출된 데이터 구조

# 14. 설명하는 주석

- 코드에서 명확하지 않는 내용은 주석으로 골라 적어라
- 코드의 결함 역시 주석을 달아라
    
    ```java
    // 새로운 경우를 추가하려면 ../foo를 반드시 변경해야 함!
    ```
    

# 15. 불필요한 주석 지우기

- 코드만으로 이해가 가능하다면 주석은 삭제하라