# 14. 일관성 있는 협력



객체지향 설게의 목표는 적절한 책이을 수행하는 객체들의 혀볅을 기반으로 결합도가 낮고 재사용 가능한 코드 구조를 창조하는 것이다.

이번 장은 일관성 있는 협력 패턴을 적용하면 코드가 쉽고 직관적이며 유연해지는것을 나타내는 것이다.



## 02 설계에 일관성 부여하기



첫번째 조언 :다양한 설계 경험을 익혀라

두번째 조언 : 널리 알려진 디자인 패터을 학습하고 변경이라는 문맥 안에서 디자인 패턴을 적용해보아라.





일관성 있는 협력을 위한 지침 

- 변하는 개념을 변하지 않는 개념으로부터 분리하라.
- 변하는 개념을 캡슐화하라.



### 캡슐화 다시 살펴보기



캡슐화는 데이터 은닉 이상의 기능이다.단순히 데이터를 감추는 것이 아닌 소프트웨어 안에서 변할 수 있는 어떤 '개념'이라도 감추는 것이다.

캡슐화의 가장 대표적인 예는 객체의 퍼블릭 인터페이스와 구현을 분리하는 것이다. 

변경을 캡슐화하는 다양한 방법이 존재하지만 가장 일반적인 것은 서브타입 캡슐화와 객체 캡슐화를 조합하는 것이다.



방법

변하는 부분을 분리해서 타입 계층을 만든다.

변하지 않는 부분의 일부로 타입 게층을 합성한다.



## 03 일관성 있는 기본 정책 구현하기



### 변경 분리하기

변하는 부분과 변하지 않는 부분을 분리해 변하지 않는 부분으로부터 변하는부분을 분리해야 한다.



### 변경 캡슐화하기

변경을 캡슐화 해서 파급효과를 줄여야 한다.

변하는 부분의 공통점을 추상화한다.

변하지 않는 부분이 오직 추상화에만 의존하도록 관계를 제한한다.



### 협력 구현

협력을 일관성 있게 만들면 상황이 달라진다.변하지 않는 부분은 공통적이라느 것을 기억하라.

유사한 기능에 대해 유사한 협력 패턴을 적용하는 것은 객체지향 시스템에서 개념적 무결승을 유지할 수 있는 가장 효과적인 방법이다.

개념적 무결성을 일관성과 동일한 뜻으로 간주해도 무방하다.



지속적으로 개선하라.

처음에는 일관성을 유지하는 것처럼 보이던 협력패턴이 시간이 흐르면 금이간다.

협력은 고정된 것이 아니다. 현재 변경사항을 수용하기 어려우면 리팩터링 하고 지속적으로 개선하라.



### 패턴을 찾아라

변경을 캡슐화하는 방법이 협력에 참여하는 객체들의 역할과 책임을 결정하고 이렇게 결정된 협력이 코드의 구조를 결정한다.

애플리케이션에서 유사한 기능에 대한 변경이 지속적으로 발생하고 있따면 변경을 캡슐화할 수 있는 적절한 추상화를 찾은 후 변하지 않는 공통적인 책임을 할당하라!



