# 15. 디자인 패턴과 프레임 워크



디자인 패턴 : 소프트웨어 설계에서 반복적으로 발생하는 문제에 대해 반복적으로 적용할 수 있는 해결방법

프레임 워크 : 설계와 코드를 함께 재사용하기 위한 것 / 애플리케이션의 아키텍처를 구현 코드의 형태로 제공한다.



## 01 디자인 패턴과 설계 재사용



패턴의 핵심적인 특징

- 패턴은 반복적으로 발생하는 문제와 해법의 쌍으로 정의된다.
- 패턴을 사용함으로써 이미 알려진 문제와 이에 대한 해법을 문서로 정리할 수 있으며, 이 지식을 다른 사람과 의사소통할 수 있다.
- 패턴은 추상적인 원칙과 실제 코드 작성 사이의 간극을 메워주며 실질적인 코드 작성을 돕는다.
- 패턴의 요점은 패턴이 실무에서 탄생했다는 점이다.



패턴이 지닌 가장 큰 가치는 경험을 통해 축척된 실무 지식을 효과적으로 요약하고 전달할 수 있다는 점



패턴은 홀로 조재하지 않는다.

연관된 패턴들의 집합이 모여 하나의 패턴언어를 구성한다.

연관된 패턴 카테고리뿐만 아니라 패턴의 생성 규칙과 함께 패턴언어에 속한 다른 패턴과의 관계 및 협력 규칙을 포함한다.



### 패턴 분류

- 아키텍처 패턴
  - 미리 정의된 서브시스템들을 제공하고, 서브시스템들의 책임을 정의하며, 서브시스템들 사이의 관계를 조직화 하는 규칙과 가이드라인을 포함
- 분석 패턴
  - 도메인 내의 개념적인 문제를 해결하는데 초점을 맞춘다.
- 디자인 패턴
  - 특정 정황 내에서 일반적인 문제를 해결하며 , 협력하는 컴포넌트들 사이에서 반복적으로 발생하는 구조를 서술
- 이디엄
  - 주어진 언어의 기능을 사용해 컴포넌트, 혹은 컴포넌트 간의 특정 측면을 구현하는 방법을 서술



패턴은 공통적으로 역할 ,책임, 협력의 템플릿이다.

패턴의 구성 요소는 클래스가 아니라 '역할'이다.

### 캡슐화와 디자인 패턴



TEMPLATE METHOD 패턴 :알고리즘을 캡슐화 하기 위해 합성관계가 아닌 상속 관계를 사용하는 것

STRATEGY 패턴 :  알고리즘의 변경을 캡슐화하고 이를 구현하기 위해 객체 합성을 사용하는 것

COMPOSITE 패턴 : 개별 객체와 복합 객체라는 객체의 수와 관련된 변경을 캡슐화 하는 것



### 패턴은 출발점이다.

정당한 이유없이 사용된 모든 패턴은 설계를 복잡하게 만드는 장애물이다.

패턴을 적용할때는 항상 설계를 좀 더 단순하고 명확하게 만들수 있는 방법이 없는지를 고민해야 한다.

패턴을 지향하거나 패턴을 목표로 리팩터링 하는것은 패턴을 효과적으로 쓰는 것이다.

패턴은 공톤적인 문제에 적절한 해법을 제공하지만 공통적인 해법이 우리가 직면한 문제에 적합하지 않을 수 있다.



## 02 프레임워크와 코드 재사용



### 코드 재사용 대 설계 재사용



재사용의 관점에서 설계 재사용보다 더 좋은 방법은 코드 재사용이다.

가장 이상적인 형태의 재사용은 설계 재사용ㅇ과 코드 재사용을 적절한 수준으로 조합하는 것이다.

이것의 대답은 프레임 워크이다.



### 상위 정책과 하위 정책으로 패키지 분리하기



추상 클래스와 인터페이스가 일관성 있는 협력을 만드는 핵심 재료란는 것을 기억하라

협력을 일관성 있고 유연하게 만들기 위해서는 추상활를 이용해 변경을 캡슐화해야 한다.

협력을 구현하는 코드 안의 의존성은 가급적이면 추상 클래스나 인터페이스와 같은 추상화를 향하도록 작성해야한다.



배포단위로 분리할때  처음 할건 패키지로 분리하는 것이다.

중요하게 보야할것은 패키지 사이의 의존성 방향이다.

의존성 역전 원리에 따라 추상화에만 의존하도록 의존성의 방향을 조정하고 추상화를 경계로 패키지를 분리했기 때문에 세부사항을 구현한 패키지는 항상 상위 정책을 구현한 패키지에 의존해야 한다.



### 제어 역전 원리



프레임워크를 사용할 경우 개별 애플리케이션에서 프레임 워크로 제어 흐름의 주체가 이동한다. 즉 의존성을 역전시키면 제어 흐름의 주체 역시 역전된다. 이를 **제어역전 원리. 할리우드 원리**라고 한다.



## 마치며..

다양한 기법들을 혼합하고 기준을 찾고 끊임없이 고민하고 트레이오프하며, 다양한 방법을 시도하라.

디자인 패턴 / 리팩터링 /테스트 주도 개발 등을 적용하고 실험하며 실력을 향상 시키기를 바란다.



