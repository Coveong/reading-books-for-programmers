# 상속과 코드 재사용

객체지향에서 코드를 재사용하는 전통적인 방법은 클래스를 추가하는 방법이다. 가장 대표적인 기법으로는 상속이 있다.

## 상속과 중복 코드

### DRY 원칙

DRY 원칙: Don't Repeat Yourself. 모든 지식은 시스템 내에서 애매하지 않고 정말로 믿을 만한 표현 양식을 가져야 한다.

중복 코드는 변경을 방해한다. 코드를 수정하는데에 필요한 노력을 몇 배로 늘린다.

### 중복과 변경

수많은 코드 더미 속에서 어떤 코드가 중복인지 파악하기는 쉽지 않다. 항상 함께 수정돼야 하기 때문에 하나라도 빠트린다면 버그로 이어진다.

## 상속을 이용해서 중복 코드 제거하기

상속의 기본아이디어는 이미 존재하는 클래스와 유사한 클래스가 필요하다면 코드를 복사하지 말고 상속을 이용해 코드를 재사용하는 것이다.

하지만 상속은 결합도를 높이고 상속이 초래하는 부모 클래스와 자식 클래스 사이의 강한 결합이 코드를 수정하기 어렵게 만든다.

### 상속을 위한 경고 1: 강력한 결합도

자식 클래스의 메서드 안에서 super 참조를 이용해 부모 클래스의 메서드를 직접 호출한 경우 두 클래스는 강하게 결합된다. 부모 클래스의 변경에 의해 자식 클래스가 영향을 받을 수 있게 된다.

### 상속을 위한 경고 2: 불필요한 인터페이스 상속

#### 취약한 기반 클래스 문제

취약한 기반 클래스 문제: 부모 클래스의 변경에 의해 자식 클래스가 영향을 받는 현상

캡슐화를 약화시키고 결합도를 높인다.

상속받는 부모 클래스의 메서드가 자식 클래스의 내부 구조에 대한 규칙을 깨트릴 수 있다.

### 상속을 위한 경고 3: 메서드 오버라이딩의 오작용 문제

자식 클래스가 부모 클래스의 메서드를 오버라이딩할 경우 부모 클래스가 자신의 메서드를 사용하는 방법에 자식 클래스가 결합될 수 있다.

### 상속을 위한 경고 4: 부모 클래스와 자식 클래스의 동시 수정 문제

클래스를 상속하는 결합도로 인해 자식 클래스와 부모 클래스의 구현을 영원히 변경하지 않거나 자식 클래스와 부모 클래스를 동시에 변경하거나 둘 중 하나를 선택할 수밖에 없다.

## 상속로 인한 피해 최소화하기

### 추상화에 의존하자

* 두 메서드가 유사하게 보인다면 차이점을 메서드로 추출하라
* 부모 클래스의 코드를 하위로 내리지 말고 자식 클래스의 코드를 상위로 올려라

상속 계층이 코드를 진화시키는 데 걸림돌이 된다면 추상화를 찾아내고 상속 계층 안의 클래스들이 그 추상화에 의존하도록 코드를 리팩터링하라.

### 의도를 드러내는 이름 선택하기

## 차이에 의한 프로그래밍

차이에 의한 프로그래밍: 기존 코드와 다른 부분만을 추가함으로써 애플리케이션의 기능을 확장하는 방법. 목표는 중복 코드를 제거하고 코드를 재사용하는 것이다.

상속은 강력한 도구지만 상속의 오용과 남용은 애플리케이션을 이해하고 확장하기 어렵게 만든다.
