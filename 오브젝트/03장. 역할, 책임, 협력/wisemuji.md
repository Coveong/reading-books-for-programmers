# 역할, 책임, 협력

객체지향에서 가장 중요한 것은 역할, 책임, 협력이다. 

애플리케이션의 기능을 구현하기 위해 어떤 협력이 필요하고 협력을 위해 어떤 역할과 책임이 필요한지를 고민하지 않은 채 너무 이른 시기에 구현에 초점을 맞추는 것은
변경하기 어렵고 유연하지 못한 코드를 낳는 원인이 된다.

## 협력

협력: 객체지향의 세계에서 기능을 구현할 수 있는 유일한 방법. 객체 사이의 협력은 하나의 객체가 다른 객체에게 도움을 요청할 때 시작된다.

메시지 전송은 객체 사이의 협력을 위해 사용할 수 있는 유일한 커뮤니케이션 수단이다. 객체는 다른 객체의 상세한 내부 구현에 직접 접근할 수 없다.

메시지를 수신한 객체 역시 메시지를 처리하던 중에 직접 처리할 수 없는 정보다 행동이 필요한 경우 또 다른 객체에게 도움을 요청한다.

### 협력이 설계를 위한 문맥을 결정한다

객체가 참여하고 있는 협력이 객체를 구성하는 행동과 상태 모두를 결정한다. 

## 책임

책임: 객체에 의해 정의되는 응집도 있는 행위의 집합으로 객체가 유지해야 하는 정보와 수행할 수 있는 행동에 대해 개략적으로 서술한 문장이다.

**하는 것**
* 객체를 생성하거나 계산을 수행하는 등의 스스로 하는 것
* 다른 객체의 행동을 시작시키는 것
* 다른 객체의 활동을 제어하고 조절하는 것

**아는 것**
* 사적인 정보에 관해 아는 것
* 관련된 객체에 관해 아는 것
* 자신이 유도하거나 계산할 수 있는 것에 관해 아는 것

객체에게 얼마나 적절한 책임을 할당하느냐에 따라 설계의 전체적인 품질이 결정된다. 객체의 구현 방법은 상대적으로 책임보다는 덜 중요하며 책임을 결정한 후에 고민해도 늦지 않다.

## 책임 할당

상태와 행동을 갖는 자율적인 객체를 만드는 가장 기본적인 방법.

1. 협력이라는 문맥을 정의해야 한다.
2. 메시지를 선택한다.
3. 메시지를 처리할 적절한 객체를 선택한다.
4. ^ 이 객체는 또다른 객체에게 정보를 요청할 수 있다(메시지로).
5. 반복

## 책임 주도 설계

책임을 갖고 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방법을 RDD라고 한다.

1. 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.
2. 시스템 책임을 더 작은 책임으로 분할한다.
3. 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.
4. 객체가 책임을 수행하는 도중 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.
5. 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.

### 책임을 할당할 때 고려해야 하는 요소1: 메시지가 객체를 결정한다.

메시지가 객체를 선택하게 해야 하는 이유:
1. 객체가 최소한의 인터페이스를 가질 수 있게 됨
2. 객체는 충분히 추상적인 인터페이스를 가질 수 있게 됨

### 책임을 할당할 때 고려해야 하는 요소2: 행동이 상태를 결정한다.

객체의 행동은 객체가 협력에 참여할 수 있는 유일한 방법이다. (상태는 아님) 객체가 가질 수 있는 상태는 행동을 결정하고 나서야 비로소 결정할 수 있다.

개별 객체의 상태와 행동이 아닌 시스템의 기능을 구현하기 위한 협력에 초점을 맞춰야 응집도가 높고 결합도가 낮은 객체들을 만들 수 있다.

## 역할

역할: 객체가 어떤 특정한 협력 안에서 수행하는 책임의 집합

실제로 협력을 모델링할 때는 특정한 객체가 아니라 역할에게 책임을 할당한다고 생각하는게 좋다.

### 유연하고 재사용 가능한 협력

동일한 책임을 수행하는 역할을 기반으로 두 개의 협력을 하나로 통합할 수 있다.

### 객체 vs 역할

협력에 적합한 책임을 수행하는 대상이 한 종류라면 간단하게 객체로 간주하고 여러 종류의 객체들이 참여할 수 있다면 역할이라고 부르면 된다.

단, 설계 초반에는 책임과 협력의 큰 그림을 탐색하는 것이 가장 중요한 목표여야 하고 역할과 객체를 명확하게 구분하는 것은 그렇게 중요하지는 않다.

### 역할과 추상화

추상화의 장점은 협력의 관점에서 역할에서도 동일하다:
1. 세부 사항에 억눌리지 않고도 상위 수준의 정책을 쉽고 간단하게 표현할 수 있다.
2. 설계를 유연하게 만들 수 있다.

객체에게 중요한 것은 행동이고 역할이 중요한 이유는 동일한 협력을 수행하는 객체들을 추상화시킬 수 있기 때문이다.

### 협력과 역할

* 협력이라는 문맥 안에서 역할은 특정한 협력에 참여해서 책임을 수행하는 객체의 일부다.
* 일반적으로 역할은 객체가 협력에 참여하는 잠시 동안에만 존재하는 일시적인 개념이다.
* 역할은 모양이나 구조에 의해 정의될 수 없으며 오직 시스템의 문맥 안에서 무엇을 하는지에 의해서만 정의될 수 있다.
* 협력 관점에서 동일한 역할을 수행하는 객체들은 서로 대체 가능하다.
* 객체 역시 여려 협력, 즉 여러 역할을 가질 수 있다.















