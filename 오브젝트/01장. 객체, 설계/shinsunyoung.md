# 1. 객체, 설계

# 티켓 판매 어플리케이션의 문제점

코드는 개인 레포지토리에 따로 저장해두었습니다!

## 예상을 빗나가는 코드

- 관람객과 판매원이 소극장의 통제를 받는 수동적인 객체이다.
    - 소극장이라는 제 3자가 초대장을 확인하기 위해 관람객의 가방을 마음대로 뒤짐
    - 티켓이 하나씩 사라지고 돈이 저절로 쌓임
- 이 코드를 이해하기 위해 세부적인 내용들을 한꺼번에 기억해야 한다.
    - `enter()`을 이해하기 위해서는 다른 객체들을 모두 봐야한다,

## 변경에 취약한 코드

- 서로 너무 많이 의존하고 있다.
- 어떤 객체가 변경될 때 그 객체에게 의존하는 다른 객체도 함께 변경된다.

→ 결합도를 낮춰 변경이 용이한 설계를 만들어야 한다.

# 설계 개선하기

관람객은 스스로 가방 안의 현금과 초대장을 처리하고,

판매원은 스스로 매표소의 티켓과 판매 요금을 다루게 처리해야한다.

→ 관람객과 판매원을 **자율적인 존재**로 만들면 된다.

## 자율성을 높이자

- [티켓을 꺼내고 판매 요금을 적립하는 책임을 판매원에게 전달했다.](https://github.com/shinsunyoung/my-study-room/commit/192c1d8933ff9e3a17605590a8916885712b13af)
- [티켓을 꺼내는 책임을 방문자에게 전달했다.](https://github.com/shinsunyoung/my-study-room/commit/e1dc8a4830c8cb2555d1f42534d339d14091dd83)
- 개념적으로나 물리적으로 객체 내부의 세부사항을 감추었다. (캡슐화)

## 무엇이 개선됐는가

- 방문자나 판매원의 내부 구현을 변경하더라도 극장의 코드를 변경할 필요가 없어졌다.

## 캡슐화와 응집도

- 객체 내부 상태를 캡슐화하고 객체 간에 오직 메시지를 통해 상호작용하도록 만들어야 한다.
- 자신의 데이터를 스스로 처리하는 자율적인 객체를 만들면 결합도는 낮추고, 응집도는 높일 수 있다.

## 절차지향과 객체지향

- 절차지향
    - 프로세스와 데이터를 별도의 모듈에 위치시키는 방식
- 객체지향
    - 프로세스와 데이터가 동일한 모듈 내부에 위치시키는 방식
    - 캡슐화를 이용해 의존성을 적절히 관리함으로써 객체 사이의 결합도를 낮춰야 한다.

## 책임의 이동

![img](https://blog.kakaocdn.net/dn/d2K76u/btqFgxSptJz/zAkkrkt7LNuc8ok9kLIKo0/img.jpg)

![img](https://blog.kakaocdn.net/dn/c9WRy0/btqFhKQMWxg/5qWmckODlZkVch8xeiICCk/img.jpg)

- 각 객체는 자신을 스스로 책임진다.

## 더 개선할 수 있다

TicketOffice가 Audience의 존재를 알게되며 의존성이 생겼다.

1. 어떤 기능을 설계하는 방법은 한 가지 이상일 수 있다.
2. 동일한 기능을 한 가지 이상의 방법으로 설계할 수 있기 때문에 설계는 트레이드오프의 산물이다.

## 그래, 거짓말이다!

현실에서는 수동적인 존재는 객체지향에서는 능동적이고 자율적으로 바뀐다.

→ 의인화

# 객체지향 설계

## 설계가 왜 필요한가

- 좋은 설계란?
    - 변경을 수용할 수 있는 설계 (요구사항은 항상 변경된다!)

## 객체지향 설계

- 좋은 객체지향 설계란?
    - 협력하는 객체 사이의 의존성을 적절하게 관리하는 설계