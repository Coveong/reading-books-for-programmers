# 11장. 합성과 유연한 설계

- 상속
    - 부모 클래스 - 자식 클래스 연결해서 코드 재사용
    - 의존성이 컴파일에 해결
    - is-a 관계
    - 부모 클래스에 의존
    - 클래스 사이의 정적인 관계
        - 코드 작성 시점에 상속 관계 변경 불가능
    - 부모 클래스 안에 구현된 코드 자체를 재사용
- 합성
    - 전체를 표현라는 객체가 부분을 표현하는 객체를 포함해서 객체 재사용
    - 의존성이 런타임에 해결
    - has-a 관계
    - 퍼블릭 인터페이스에 의존
    - 클래스 사이의 동적인 관계
        - 실행 시점에 동적으로 변경 가능
    - 포함되는 객체의 퍼블릭 인터페이스를 재사용

# 상속을 합성으로 변경하기

### 상속 남용 시 문제점

1. 불필요한 인터페이스 상속 문제
2. 메서드 오버라이딩 오작용 문제
3. 부모 클래스와 자식 클래스 동시 수정 문제

### 합성으로 바꾸는 방법?

1. 자식 클래스에 선언된 상속 관계 제거
2. 부모 클래스의 인스턴스를 자식 클래스의 인스턴스 변수로 선언

## 불필요한 인터페이스 상속 문제

합성을 사용한 불필요한 오퍼레이션을 사용하지 않을 수 있다.

## 메서드 오버라이딩 오작용의 문제

- 포워딩
    - 기존 클래스의 인터페이스를 그대로 외부에 제공하면서 구현에 대한 결합 없이 일부 작동 방식을 변경하고 싶을 때 사용하는 기법
- 포워딩 메서드
    - 동일한 메서드를 호출하기 위해 추가된 메서드

## 부모 클래스와 자식 클래스의 동시 수정 문제

함께 수정해야하는 것은 똑같지만 캡슐화를 할 수 있다.

```java
몽키 패치
현재 실행중인 환경에만 영향을 미치도록 지역적으로 코드를 수정하거나 확장하는 것
```

# 상속으로 인한 조합의 폭발적인 증가

- 하나의 기능을 추가하거나 수정하기 위해 불필요하게 많은 수의 클래스을 추가하거나 수정해야 한다.
- 단일 상속만 지원하는 언어에서는 상속으로 인해 올리여 중복 코드의 양이 늘어날 수 있다.

```java
훅 메서드
추상 메서드와 동일하게 자식 클래스에서 오버라이딩할 의도로 메서드를 추가했지만,
편의를 위해 기본 구현을 제공하는 메서드
```

상속의 남용으로 하나의 기능을 추가하기 위해 필요 이상의 많은 수의 클래스를 추가해야하는 경우가 있다. → 클래스 폭발

# 합성 관계로 변경하기

합성을 사용하면 구현 시점에 정책들의 관계를 고정시킬 필요가 없으며 실행 시점에 정책들의 관계를 유연하게 변경할 수 있게 된다.

# 믹스인

객체를 생성할 때 코드 일부를 클래스 안에 섞어 넣어 재사용하는 기법 (컴파일 시점에)

추상 서브 클래스라고 부르기도 한다.

특정한 클래스에 대한 변경 또는 확장을 독립적으로 구현한 후 필요한 시점에 차례대로 추가할 수 았다. (쌓을 수 있는 변경)

TODO: 시간날 때 믹스인 한 번 더 읽어보기