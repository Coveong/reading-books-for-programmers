# 11μ¥ λ‹¨μ„ ν…μ¤νΈ μ•ν‹° ν¨ν„΄

## 1. λΉ„κ³µκ° λ©”μ„λ“ λ‹¨μ„ ν…μ¤νΈ

λ‹¨μ„ ν…μ¤νΈλ¥Ό μ„ν•΄ λΉ„κ³µκ° λ©”μ„λ“λ¥Ό λ…Έμ¶ν•λ©΄ ν…μ¤νΈκ°€ κµ¬ν„ μ„Έλ¶€ μ‚¬ν•­κ³Ό κ²°ν•©λκ³  κ²°κ³Όμ μΌλ΅ λ¦¬ν©ν„°λ§ λ‚΄μ„±μ΄ λ–¨μ–΄μ§‘λ‹λ‹¤. λΉ„κ³µκ° λ©”μ„λ“λ¥Ό ν…μ¤νΈ ν•λ” κ²ƒ μμ²΄λ” λ‚μμ§€ μ•μ§€λ§ κµ¬ν„ μ„Έλ¶€ μ‚¬ν•­μ ν”„λ΅μ‹μ— ν•΄λ‹Ήν•λ―€λ΅ μΆ‹μ§€ μ•μµλ‹λ‹¤.

π¤” λΉ„κ³µκ° λ©”μ„λ“λ¥Ό ν…μ¤νΈν•λ” λ°©λ²•μ€ μ—†μ„κΉμ”?

π—¨ λΉ„κ³µκ° ν…μ¤νΈλ¥Ό μ§μ ‘ ν…μ¤νΈν•λ” λ€μ‹ , μ‹λ³„ν•  μ μλ” λ™μ‘μΌλ΅ κ°„μ ‘μ μΌλ΅ ν…μ¤νΈν•λ” λ°©λ²•μ΄ μμµλ‹λ‹¤.

### λΉ„κ³µκ° λ©”μ„λ“μ™€ λ¶ν•„μ”ν• μ»¤λ²„λ¦¬μ§€

λ§μ•½, λΉ„κ³µκ° λ©”μ„λ“κ°€ λ³µμ΅ν•μ—¬ μ‹λ³„ν•  μ μλ” λ™μ‘μΌλ΅λ„ ν…μ¤νΈν•κΈ° μ–΄λ µλ‹¤λ©΄ λ‘ κ°€μ§€ λ¬Έμ κ°€ μμ„ μ μμµλ‹λ‹¤.

- μ£½μ€ μ½”λ“λ‹¤.
- μ¶”μƒν™”κ°€ λ„λ½λΌμλ‹¤.

### λΉ„κ³µκ° λ©”μ„λ“ ν…μ¤νΈκ°€ νƒ€λ‹Ήν• κ²½μ°

λΉ„κ³µκ° λ©”μ„λ“λ¥Ό μ λ€ ν…μ¤νΈν•μ§€ λ§λΌλ” κ·μΉ™μ—λ„ μμ™Έλ” μμµλ‹λ‹¤. λ°”λ΅, μ‹λ³„ν•  μ μλ” λ™μ‘μ΄ λΉ„κ³µκ°μΈ κ²½μ° μ…λ‹λ‹¤.

μλ¥Ό λ“¤λ©΄, ORMμ€ κ³µκ° μƒμ„±μκ°€ ν•„μ”ν•μ§€ μ•μΌλ©°, λΉ„κ³µκ° μƒμ„±μλ΅ μ‘λ™ν•  μ μκΈ°μ— μƒμ„±μλ” λΉ„κ³µκ°μ΄λ©΄μ„ μ‹λ³„ν•  μ μλ” λ™μ‘μΈ λ©”μ„λ“μ…λ‹λ‹¤.

```csharp
public class Inquiry
{
	public bool IsApporved {get; private set;}
	public DateTime? TimeApproved {get; private set;}

	//λΉ„κ³µκ°μ΄λ©΄μ„ μ‹λ³„ν•  μ μλ” λ™μ‘(ORMκ³Όμ κ³„μ•½)
	private Inquiry(bool isApproved, DateTime? timeApproved)
	{
		if(isApproved && !timeApproved.HasValue)
		{
			throw new Exception();
		}
	
		IsApproved = isApproved;
		TimeAppored = timeAppored;
	}

	public void Approve(DateTime now)
	{
		if(IsApproved)
			return;
	
		IsApproved = true;
		TimeAppored = now;
	}
}

```

μ΄λ΄ κ²½μ° ν΄λμ¤μ κ³µκ° API λ…Έμ¶ μμ—­μ„ μ‘κ² μ μ§€ν•λ ¤λ©΄ ν…μ¤νΈμ—μ„ λ¦¬ν”λ ‰μ…μ„ ν†µν•΄ Inquiryλ¥Ό μΈμ¤ν„΄μ¤ν™”ν•  μ μμµλ‹λ‹¤.

## 2. λΉ„κ³µκ° μƒνƒ λ…Έμ¶

λ‹¨μ„ ν…μ¤νΈ λ©μ μΌλ΅λ§ λΉ„κ³µκ° μƒνƒλ¥Ό λ…Έμ¶ν•λ” κ²ƒμ€ μ•ν‹°ν¨ν„΄μ…λ‹λ‹¤. ν…μ¤νΈλ” μ ν’μ½”λ“μ™€ μ •ν™•ν κ°™μ€ λ°©μ‹μΌλ΅ SUTμ™€ μƒνΈ μ‘μ©ν•΄μ•Ό ν•λ©°, νΉλ³„ν• κ¶ν•μ΄ λ”°λ΅ μμ–΄μ„λ” μ• λ©λ‹λ‹¤.

> ν…μ¤νΈ μ μμ„±μ„ μ„ν•΄ κ³µκ° API λ…Έμ¶ μμ—­μ„ λ„“νλ” κ²ƒμ€ μΆ‹μ§€ μ•μ€ κ΄€μµμ…λ‹λ‹¤.
> 

π¤” λΉ„κ³µκ° λ©”μ„λ“λ¥Ό ν…μ¤νΈν•λ” λ°©λ²•μ€ μ—†μ„κΉμ”?

π—¨ λ°©λ²•μ€ ν•΄λ‹Ή μƒνƒκ°€ ν΄λμ¤λ¥Ό μ–΄λ–»κ² μ‚¬μ©ν•λ”μ§€λ¥Ό λ€μ‹  μ‚΄ν΄λ³΄λ” κ²ƒμ…λ‹λ‹¤. λ‹¤λ¥Έ κ³³μ—μ„ ν•΄λ‹Ή ν•„λ“λ¥Ό μ‚¬μ©ν•κΈ° μ‹μ‘ν•λ©΄ κ³µμ‹μ μΌλ΅ SUTμ μ‹λ³„ν•  μ μλ” λ™μ‘μ΄ λκΈ° λ–„λ¬Έμ— ν…μ¤νΈμ—μ„ ν•΄λ‹Ή ν•„λ“λ¥Ό κ²°ν•©ν•  μ μμµλ‹λ‹¤.

## 3. ν…μ¤νΈλ΅ μ μΈλ λ„λ©”μΈ μ§€μ‹

λ„λ©”μΈ μ§€μ‹μ„ ν…μ¤νΈλ΅ μ μ¶ν•λ” κ²ƒμ€ μ•ν‹° ν¨ν„΄μ…λ‹λ‹¤. νΉν λ³µμ΅ν• μ•κ³ λ¦¬μ¦μ„ λ‹¤λ£¨λ” ν…μ¤νΈμ—μ„ λ°μƒν•©λ‹λ‹¤. λ‹¨μν μ ν’ μ½”λ“μ—μ„ ν…μ¤νΈλ΅ μ•κ³ λ¦¬μ¦(μ½”λ“)λ¥Ό λ³µμ‚¬-λ¶™μ—¬λ„£κΈ°λ¥Ό ν•λ‹¤λ©΄ μ΄λ” κµ¬ν„ μ„Έλ¶€ μ‚¬ν•­κ³Ό κ²°ν•©λ©λ‹λ‹¤.

```csharp
public class CalculatorTests
{
	[Theroy]
	[InlineData(1, 3, 4)]
	[InlineData(11, 33, 44)]
	[InlineData(100, 500, 600)]
	public void Adding_two_numbers(int value1, int value2, int expected)
	{
		int actual = Calculator.Add(value1, value2);
		Assert.Equal(expected, actual);
	}
}
```

μ„μ™€ κ°™μ΄ μ¬λ°”λ¥Έ ν…μ¤νΈ λ°©λ²•μ€ ν…μ¤νΈλ¥Ό μ‘μ„±ν•  λ• νΉμ • κµ¬ν„μ„ μ•”μ‹ν•μ§€ μ•κ³  λ³µμ ν•λ” λ€μ‹  κ²°κ³Όλ¥Ό ν…μ¤νΈμ— ν•λ“ μ½”λ”©ν•΄μ•Ό ν•©λ‹λ‹¤. λ‹¨μ„ ν…μ¤νΈμ—μ„λ” μμƒ κ²°κ³Όλ¥Ό ν•λ“μ½”λ”©ν•λ” κ²ƒμ΄ μΆ‹μµλ‹λ‹¤.

## 4. μ½”λ“ μ¤μ—Ό

<aside>
π’΅ μ½”λ“ μ¤μ—Όμ€ ν…μ¤νΈμ—λ§ ν•„μ”ν• μ ν’ μ½”λ“λ¥Ό μ¶”κ°€ν•λ” κ²ƒμ…λ‹λ‹¤.

</aside>

μ½”λ“ μ¤μ—Όμ λ¬Έμ λ” ν…μ¤νΈ μ½”λ“μ™€ μ ν’ μ½”λ“κ°€ νΌμ¬λμ–΄ μ μ§€λΉ„κ°€ μ¦κ°€ν•λ” κ²ƒμ…λ‹λ‹¤. μ΄λ¥Ό λ°©μ§€ν•κΈ° μ„ν•΄μ„  ν…μ¤νΈ μ½”λ“λ¥Ό μ ν’ μ½”λ“λ² μ΄μ¤μ™€ λ¶„λ¦¬ν•΄μ•Ό ν•©λ‹λ‹¤.

## 5. κµ¬μ²΄ ν΄λμ¤λ¥Ό λ©μΌλ΅ μ²λ¦¬ν•κΈ°

κµ¬μ²΄ ν΄λμ¤λ¥Ό λ€μ‹  λ©μΌλ΅ μ²λ¦¬ν•΄μ„ λ³Έλ ν΄λμ¤μ κΈ°λ¥ μΌλ¶€λ¥Ό λ³΄μ΅΄ν•  μ μμΌλ©° μ΄λ” μ μ©ν•μ§€λ§, λ‹¨μΌ μ±…μ„ μ›μΉ™μ„ μ„λ°°ν•λ” λ‹¨μ μ΄ μμµλ‹λ‹¤.  

μΌλ¶€ κΈ°λ¥μ„ μ§€ν‚¤λ ¤ κµ¬μ²΄ ν΄λμ¤λ¥Ό λ©μΌλ΅ μ²λ¦¬ν•΄μ•Ό ν•λ©΄, μ΄λ” λ‹¨μΌ μ±…μ„ μ›μΉ™μ„ μ„λ°°ν•λ―€λ΅ μ•ν‹°ν¨ν„΄μ…λ‹λ‹¤.

## 6. μ‹κ°„ μ²λ¦¬ν•κΈ°

ν„μ¬ λ‚ μ§μ™€ μ‹κ°„ λ“± λ³€κ²½λλ” κΈ°λ¥μ„  ν…μ¤νΈν•λ©΄ κ±°μ§“ μ–‘μ„±μ΄ λ°μƒν•©λ‹λ‹¤. μ΄λ¬ν• μμ΅΄μ„±μ„ μ•μ •ν™”ν•λ” λ‘ κ°€μ§€ λ°©λ²•μ΄ μμµλ‹λ‹¤.

### μ— λΉ„μ–ΈνΈ μ»¨ν…μ¤νΈλ΅μ„μ μ‹κ°„: μ•ν‹°ν¨ν„΄

```csharp
public static class DateTimeServer
{
	private static Func<DateTime> _func;
	public static DateTime Now => _func();

	public static void Init(Func<DateTime> func)
	{
		_func = func;
	}
}

DateTimeService.Init(() => DateTime.Now); //μ΄μ ν™κ²½ μ΄κΈ°ν™”
DateTimeService.Init(() => new DateTime(2020, 1, 1)); //λ‹¨μ„ ν…μ¤νΈ ν™κ²½ μ΄κΈ°ν™”
```

μ•°λΉ„μ–ΈνΈ μ»¨ν…μ¤νΈλ” μ ν’ μ½”λ“λ¥Ό μ¤μ—Ό μ‹ν‚¤κ³  ν…μ¤νΈλ¥Ό λ” μ–΄λ µκ² λ§λ“­λ‹λ‹¤. μ •μ  ν•„λ“λ” ν…μ¤νΈ κ°„μ— κ³µμ ν•λ” μμ΅΄μ„±μ„ λ„μ…ν•΄ ν•΄λ‹Ή ν…μ¤νΈλ¥Ό ν†µν•© ν…μ¤νΈ μμ—­μΌλ΅ μ „ν™ν•©λ‹λ‹¤.

### λ…μ‹μ  μμ΅΄μ„±μΌλ΅μ„μ μ‹κ°„

μ•°λΉ„μ–ΈνΈ μ»¨ν…μ¤νΈμ—μ„ μ •μ  λ©”μ„λ“λ¥Ό ν†µν•΄ μ°Έμ΅°ν•λ” λ€μ‹  μ„λΉ„μ¤ λλ” μΌλ° κ°’μΌλ΅ μ‹κ°„ μμ΅΄μ„±μ„ λ…μ‹μ μΌλ΅ μ£Όμ…ν•λ” κ²ƒμ€ μ•ν‹°ν¨ν„΄μ…λ‹λ‹¤. μ‹κ°„μ„ ν•­μƒ μΌλ° κ°’μΌλ΅ μ£Όμ…ν•  μ μ—†κ³  μμ΅΄μ„± μ£Όμ ν”„λ μ„μ›ν¬κ°€ κ°’ κ°μ²΄μ™€ μ μ–΄μΈλ¦¬μ§€λ” μ•μµλ‹λ‹¤.

## 7. μ •λ¦¬

- λ‹¨μ„ ν…μ¤νΈλ¥Ό μ„ν•΄ λΉ„κ³µκ° λ©”μ„λ“λ¥Ό λ…Έμ¶ν•λ©΄ ν…μ¤νΈκ°€ κµ¬ν„μ— κ²°ν•©λ©λ‹λ‹¤. μ‹λ³„ν•  μ μλ” λ™μ‘μΌλ΅μ„ κ°„μ ‘μ μΈ ν…μ¤νΈλ¥Ό ν•΄μ•Ό ν•©λ‹λ‹¤.
- λ§μ•½, λΉ„κ³µκ° λ©”μ„λ“κ°€ ν΄λμ¤μ μ‹λ³„ν•  μ μλ” λ™μ‘μ΄λΌλ©΄ ν΄λμ¤μ™€ ORMλλ” ν©ν† λ¦¬κ°„μ λΉ„κ³µκ° κ³„μ•½μ„ κµ¬ν„ν•΄μ•Ό ν•©λ‹λ‹¤.
- λΉ„κ³µκ°μ€λ μƒνƒλ¥Ό λ‹¨μ„ ν…μ¤νΈλ§μ„ μ„ν•΄ λ…Έμ¶ν•μ§€ λ§μ•„μ•Ό ν•©λ‹λ‹¤.
- ν…μ¤νΈλ¥Ό μ‘μ„±ν•  λ• νΉμ • κµ¬ν„μ„ μ•”μ‹ν•μ§€ λ§μ•„μ•Ό ν•©λ‹λ‹¤.
- λ„λ©”μΈ μ§€μ‹μ„ ν…μ¤νΈμ— μ μ¶ν•μ§€ μ•μ•„μ•Ό ν•©λ‹λ‹¤.
- μ½”λ“ μ¤μ—Όμ€ ν…μ¤νΈμ—λ§ ν•„μ”ν• μ ν’ μ½”λ“λ¥Ό μ¶”κ°€ν•λ” κ²ƒμ…λ‹λ‹¤.
- κΈ°λ¥μ„ μ„ν•΄ κµ¬μ²΄ ν΄λμ¤λ¥Ό λ©μΌλ΅ μ²λ¦¬ν•λ©΄ λ‹¨μΌ μ±…μ„ μ›μΉ™μ„ μ„λ°ν•κ² λ©λ‹λ‹¤.
    - λ‘ κ°€μ§€ ν΄λμ¤(λ„λ©”μΈ λ΅μ§ ν΄λμ¤/ν”„λ΅μ„Έμ¤ μ™Έλ¶€ μμ΅΄μ„± ν†µμ‹  ν΄λμ¤)λ΅ λ¶„λ¦¬
- μ„λΉ„μ¤λ‚ μΌλ° κ°’μ λ…μ‹μ μΈ μμ΅΄μ„±μΌλ΅ μ‹κ°„μ„ μ£Όμ…ν•΄μ•Ό ν•©λ‹λ‹¤. μ•°λΉ„μ–ΈνΈ μ»¨ν…μ¤νΈλ΅ ν„μ¬ μ‹κ°„μ„ μΈ΅μ •ν•λ©΄ μ½”λ“κ°€ μ¤μ—Όλ©λ‹λ‹¤.