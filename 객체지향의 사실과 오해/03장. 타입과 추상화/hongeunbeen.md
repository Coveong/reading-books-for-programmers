# 3. 타입과 추상화

> 일단 컴퓨터를 조작하는 것이 추상화를 구축하고, 조작하고, 추론하는 것에 관한 모든 것이라는 것을 깨닫고 나면 (훌륭한) 컴퓨터 프로그램을 작성하기 위한 중요한 저넺 조건은 추상화를 정확하게 다루는 능력이라는 것이 명확해진다.
- 키스 데블린(Keith Devlin)

# 지하철 노선도의 추상화

- 사실적인 정보가 오히려 지하철을 이용하는 승객들로 하여금 노선들으으 이해하기 어려움
- 디자인에서 가장 중요한 것은 얼마나 사실적으로 지형 묘사 X → 역과 역 사이의 연결정 얼마나 직관적으로 표현
- '정확성'을 버리고 그 '목적'에 집중
- 꼭 알아야 하는 사실만 정확하게 표현하고 몰라도 되는 정보 무시함으로써 이해하기 쉬고 단순하며 목적에 부합하는 지하철 노선도 추상화

# 추상화란?

어떤 양상, 세부 사항, 구조를 좀 더 명확하게 이해하기 위해 특정 절차나 물체를 의도적으로 생략하거나 감춤으로써 복잡도를 극복하는 방법

복잡성을 다루기 위해 추상화는 두 차원에서 이뤄진다

- 구체적인 사물들 간의 공통점은 취하고 차이점은 버리는 일반화 통해 단순하게 만들기
- 중요한 부분을 강조하기 위해 불필요한 세부 사항르 제거함으로써 단순하게 만드는 것

# 추상화를 통한 복잡성 극복

- 지하철 노선도
    - 지하철 노선도의 추상화는 지형 정보를 제거하고 역 사이의 연결성을 강조함 → 현실 단순화
    - 승객들이 지하철을 바라보는 모델과 일치 ⇒ 승객들이 지하철 이용 이유 = 해리 벡 지형 정보 제거 이유
- 진정한 의미에서의 추상화
    - 현실에서 출발하되 불필요한 부분을 도려내가면서 사물의 놀라운 본질을 드라나게 하는 과정
    - 불필요한 부분을 무시함으로써 현실에 존재하는 복잡성을 극복하는 것
- 추상화의 수준, 이익, 가치는 목적에 의존적

→ 객체 지향 패러다임은 객체라는 추상화를 통해 현실의 복잡성 극복

# 객체지향과 추상화

- 앨리스 이야기
    - 앨리스는 객체들 중에서 하얀 토끼를 제외한 모든 객체를 '트럼프'라는 하나의 개념으로 단순화해서 바라보고 있다. 정원사들, 병사들, 하객들의 계급, 나이, 성격 등 차이점은 과감하게 무시한 채 '트럼프'라는 유사성을 기반으로 추상화(단순화)해서 바라보고 있다.
- 그룹으로 나눠 단순화
    - 각 인물들에게는 다양한 측면에서 서로를 구별할 수 있는 독특한 특징 존재
    - 명확한 경계를 가지고 서로 구별할 수 있는 구체적인 사람이나 사물을 객체지향 패러다임에서는 객체하고 칭함
    - 일반적인 외형과 행동 방식을 지기오 있기 때문에 인물들이 공통적으로 트럼프라고 불리었다.
    - 앨리스는 정원에 있는 인물들을 두 개의 그룹으로 나눔
        - 트럼프의 그룹
        - 토끼의 그룹

        → 다수의 개발적인 인물이 아니라 '트럼프', '토끼'라는 두새의 렌즈를 통해 정원을 바라보는 것은 정원에 내재된 복장성을 효과적으로 감소

    ## 개념

    - 공통점을 기반으로 객체들을 묶기 위한 그룹
    - 우리가 인식하고 있는 다양한 사물이나 객체에 적용할 수 있는 아이디어나 관념

    - 앤리스는 인물들의 차이점을 의도적으로 무시하고 공통점만을 강조함으로써 '트럼프'라는 그룹에 속할 수 있는 인물들을 취사선택 함
        - 트럼프 = 공통점을 가진 객체들을 포괄할 수 있는 개념

    → 인물들의 차이점을 무시하고 공통점만을 취해 트럼프라는 개념으로 단순화한 것 = 추상화의 일종

    - 사람들은 본능적으로으로 공통적인 특성을 기준으로 객체를 여러 그룹으로 묶어 동시에 다뤄야 하는 가짓수를 줄임으로써 상황을 단순화하려고 노력
    - 개념 이용해 객체를 여러 그룹으로 분류(classification)
    - 개념에 적합한 객체가 가 그룹에 포함되도록 분류

    → 개념은 공통점을 기반으로 객체를 분류할 수 있는 일종의 체

    - 개념은 객체를 분류할 수 있는 틀을 제공

    ## 객체

    - 객체란 특정한 개념을 적용할 수 있는 구체적인 사물을 의미
    - 개념이 객체에 적용됐을 떄 객체를 개념의 인스턴스
        - 객체에 어떤 개념을 적용하는 것이 가능해 개념 그룹의 일원이 될 때 객체를 그 개념의 인스턴스(instance)라고 한다.

    ## 개념의 세 가지 관점

    - 어떤 객체에 어떤 개념이 적용
    → 그 개념이 부가하는 의미를 만족시킴으로써 다른 객체와 함께 해당 개념의 일원 된것 의미
    - 객체의 분류 장치로서 개념
        - 심볼(symbol) : 개념을 가리키는 간략한 이름이나 명칭
            - ex ) '트럼프'
        - 내연(intension) : 개념의 완전한 정의를 나타내며 내연의 의미를 이용해 객체가 개념에 속하는지 여부 확인(개념을 객체에게 적용 여부 판단 조건)
            - ex ) 트럼프에 대한 설명(몸이 납작하고 두 손과 두 발이 네모난 몸 모서리에 달림)
        - 외연(extension) : 개념에 속하는 모든 객체의 집합(set)(개념의 인스턴스들이 모여 이뤄진 집합)
            - ex ) 정원사, 하트왕, 신하, 병사 등 모두 트럼프의 외연을 구성하는 객체 집합

    개념이 심볼, 내연, 외연으로 구성돼 있다는 사실보다는 개념을 이용해 객체를 분류할 수 있다는 사실 중요!

    ## 분류

    - 객체에 **특정한 개념을 적용하는 작업**으로 객체에 특정한 개념을 적용하기로 결심했을 때 우리는 그 객체를 특정한 집합의 멤버로 분류하고 있는 것이다.
    - 객체를 특정한 개념의 객체 집합에 포함시키거나 포함시키지 않는 작업
    - 어떤 객체를 어떤 개념으로 분류할지가 객체지향의 품질을 결정

    ### 분류는 추상화를 위한 도구!

    추상화

    - 구체적인 사물 간의 공통점은 취하고 차이점은 버리는 일반화를 통해 단순화
    - 중요한 부분을 강조하기 위해 불필요한 세부 사항을 제거해 단순화

    앨리스

    - 트럼프라는 개념으로 묶은 것은 개별 객체 간의 차이점 무시하고 공통점을 취한 결과
    - 트럼프에 속하는 객체들의 공통점 중에서도 우리가 중요하다고 생각하는 특징은 몸 납작 두손, 두발 네모난 몸 모서리 존재 그 외 사항들 도움X

    개념은 객체들의 복잡성을 극복하기 위한 추상화 도구!!

    ## 타입

    - 타입은 개념과 동일하다. 따라서 타입이란 우리가 인식하고 있는 다양한 사물이나 객체에 적용할 수 있는 아이디어나 관념 의미한다. 어떤 객체에 타입을 적용할 수 있을 때 그 객체를 타입의 인스턴스라고 한다. 타입의 인스턴스는 타입을 구성하는 외연인 객체 집합의 일원이 된다.
    - 공통점을 기반으로 객체들을 묶기 위한 틀로 심볼, 내연, 외연, 이용해 서술할 수 있으며 타입에 속하는 객체 역시 타입의 인스턴스라고 한다.

    타입이 근본적으로 개념과 동일 BUT 컴퓨터 내부 기계적인 의미로는 윤색된다..!!!

    ### 데이터 타입

    - 데이터 타입은 메모리 안에 저장된 데이터의 종류를 분류하는 데 사용하는 메모리 집합에 관한 메타데이터다. 데이터에 대한 분류는 암시적으로 어떤 종류의 연산이 해당 데이터에 대해 수행될 수 있는지를 결정한다.

    - 메모리의 세상에는 타입이라는 질서가 존재하지 않는다.
    - 타입이 없는 체계 안에서 모든 데이터는 일련의 비트열(bit string)로 구성된다.
    - 메모리 안의 데이터의 용도와 행동에 따라  특정한 의미 부여
        - 더하거나 빼거나 곱하기 가능 : 숫자형
        - 여러 문자로 구성돼 있고 다른 문자와 연결 가능 : 문자열형
        - 데이터 이용해 어떤 사실 참 거짓 이야기 가능 : 논리형

    → 데이터가 잘못 사용되지 않도록 제약사항을 부과

    데이터 타입과 관련해 타입에 관련한 두가지 사실

    - 타입은 데이터가 어떻게 사용되느냐에 관한 것
        - 데이터가 어떤 타입에 속하는지를 결정하는 것은 데이터에 적용할 수 있는 작업
    - 타입에 속한 데이터를 메모리에 어떻게 표현하는지는 외부로부터 철저하게 감춰진다.
        - 단지 데이터 타입에 적용할 수 있는 연산자만 알고 내부는 몰라도 된다.

    ## 객체와 타입

    - 객체를 일종의 데이터처럼 사용하기에 객체를 타입에 따라 분류하고 그 타입에 이름을 붙이는 것은 결국 프로그램에서 사용할 새로운 데이터 타입을 선언하는 것과 같다.!!!

    ### 객체의 타입

    - 어떤 객체가 어떤 타입에 속하는지를 결정하는 것은 객체가 수행하는 행동
    - 객체의 내부적인 표현은 외부로부터 철저하게 감춰진다.

    ### 행동이 우선?

    - 어떤 객체가 어떤 타입에 속하는지를 결정하는 것은 객체가 수행하는 행동

    → 결국 객체의 내부 표현 방식이 다르더라도 어떤 객체들이 동일하게 행동한다면 그 객체들은 동일한 타입에 속함!!

    → 동일한 책임을 수행하는 일련의 객체는 동일한 타입에 속함!!

    동일한 타입으로 분류하는 기준??

    - 그 객체가 타입에 속한 다른 객체와 동일한 행동을 하기만 하면 된다. 
    (어떤 데이터를 가지고 있는지는 관심 X)
    - 객체가 어떤 데이터를 보유하고 있는지는 타입을 결정하는 데 아무런 영향도 미치지 않음!!
        - 동일한 행동 = 동일한 책임 = 동일한 메시지 수신

    → 다형성

    다형성이란 동일한 요청에 대해 서로 다른 방식으로 응답할 수 있는 능력

    → 캡슐화

    외부에 행동만을 제공하고 데이터는 뒤로 감주는 것

    행동에 따라 객 체를 분류하기 위해서 행동 먼저 생각!!

    - 객체가 외부에 제공해야 하는 책임 먼저 결정
    - 책임을 수행하는 데 적합한 데이터 나중에 결정 후
    - 외부 인터페이스 뒤로 캡슐화

    객체를 결정하는 것은 행동!! 데이터는 단지 행동을 따를 뿐이다!!

    ## 타입의 계층

    - 객체가 동일한 타입으로 분류되기 위해 공통의 행동 존재
    - 트럼프는 트럼프 인간을 포괄하는 개념

    ### 일반화/특수화 관계

    일반적 - 더 포괄적이라는 의미 내포

    특수적 - 일반적인 개념보다 범위가 더 좁다는 것을 의미

    - 이 관계를 결정하는 것은 객체의 상태를 표현하는 데이터가 아니라 행동이다.
    - 한 타입이 다른 타입보다 더 특수하게 행동/ 반대로 한 타입은 다른 타입보다 더 일반적으로 행동!

    → 관계에 중요한 것은 객체가 내부에 보관한 데이터가 아니라 객체가 외부에 제공하는 행동

    행동의 관점

    일반적 타입 - 특수한 타입이 가진 모든 행동들 중에서 일부 행동만을 가지는 타입

    특수적 타입 - 일반적인 타입이 가진 모든 타입을 포함하지만 거기에 더해 자신만의 행동을 추가하는 타입

    일반적인 타입은 특수한 타입보다 더 적은 수의 행동 가지지만 더 큰 크기의 외연 집합 가진다.

    타입의 내연 의미하는 행동의 가짓수, 타입의 외연을 의미하는 집합의 크기  → 이 둘은 서로 반대!!

    ### 슈퍼타입과 서브타입

    - 일반적인 타입 - 슈퍼타입(supertype)
    - 좀 더 특수한 타입 - 서브타입(subtype)

    → 두 타입 간의 관계가 행동에 의해 결정된다

    행위적 호환성

    - 서브타입은 슈퍼타입을 대체 가능하다

    표기 방법

    - 좀 더 일반적인 타입인 슈퍼타입 상단
    - 좀 더 특수한 타입인 서브타입 하단에
    - 둘을 속이 빈 삼각형으로 연결해 표현

    → 이때 서브타입에서는 슈퍼타입과 중복된 행위를 생략 가능