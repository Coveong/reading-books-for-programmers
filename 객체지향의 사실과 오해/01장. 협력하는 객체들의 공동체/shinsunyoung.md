# 01. 협력하는 객체들의 공동체

- 객체지향의 목표는 실세계를 모방하는 것이 아닌, 오히려 새로운 세계를 창조하는 것이다.
    - 근데 왜 사람들은 이런 비유를 놓지 못하는 것일까?
        - 객체지향의 핵심적인 부분(캡슐화, 자율성 ...)을 설명하기 가장 적합하기 때문이다.

# 협력하는 사람들

## 커피 공화국의 아침

- 역할
    - **커피를 주문하는** 손님
    - **주문을 받는** 캐시어
    - **커피를 만드는** 바리스타
- 책임
    - 손님 : 커피를 주문한다.
    - 캐시어 : 커피 주문을 받는다.
    - 바리스타 : 커피를 만든다.
- 협력
    - 모두가 **'커피 주문'**이라는 협력에 참여하고 있다.
    - 만약 손님이 커피를 받고 카페를 나가면 협력 관계가 종료된다.

## 요청과 응답으로 구성된 협력

- 요청
    - 혼자 일을 처리하지 못하기 때문에 다른 사람에게 요청한다.
    - 보통 연쇄적으로 일어난다.
- 응답
    - 주어진 책임을 다하면서 필요한 지식이나 서비스를 제공한다.
    - 요청의 반대 방향으로 연쇄적으로 일어난다.

협력의 성공은 특정한 역할을 맡은 각 개인이 얼마나 요청을 성실히 이행하였는지에 따라 달려있다.

## 역할과 책임

- 역할
    - 특정한 사람이 어떤 협력 안에서 차지하는 책임이나 임무
        - 손님 : 커피를 주문하는 임무를 맡음
        - 바리스타 : 커피를 제조해야하는 책임이 있음
- 책임
    - 역할이 내포하는 개념

역할과 책임은 협력이 원활하게 진행되는 필요한 핵심적인 구성요소

협력을 위해 특정한 역할을 맡고 역할에 적합한 책임 수행

- 여러 사람이 동일한 역할 수행 가능
- 다른 사람이 같은 역할로 대체 가능
- 책임을 수행하는 방법은 자유
- 한 사람이 동시에 여러 역할 수행 가능

# 역할, 책임, 협력

## 기능을 구현하기 위해 협력하는 객체들

사람 → **객체**

에이전트의 요청 → **메세지**

처리하는 방법 → **메서드**

## 역할과 책임을 수행하며 협력하는 객체들

사람들은 특정한 **목표**를 이루기 위해 **협력**한다

협력은 특정한 책임을 수행하는 **역할**들 간 **연쇄적인 요청과 응답**을 통해 목표를 달성한다.

애플리케이션도 똑같다!

그 중, **책임**은 객체지향 설계의 품질을 결정하는 가장 중요한 요소이다.

- 여러 객체가 동일한 역할을 수행 가능
- 다른 객체가 같은 역할로 대체 가능
- 책임을 수행하는 방법은 자유
- 한 객체가 동시에 여러 역할 수행 가능

# 협력 속에 사는 객체

객체지향이라고 부르는 이유는 패러다임의 중심에 객체가 있기 때문에! 객체 혼자 어플리케이션 기능을 감당하기는 버겁기 때문에 역할, 책임, 협력을 통해 유지된다.

### 객체가 갖추어야할 덕목

1. 협력적이여야한다.
    - 단, 복종하는 것이 아니라 요청에 응답할뿐이여야한다.
    - 어떤 방식으로 응답할지는 스스로 판단한다.
    - 요청 응답 여부도 스스로 판단한다.
2. 자율적이여야한다.
    - 협력에 참여하지만 스스로의 결정과 판단에 따라 행동해야한다.
    - 자율적인 객체들의 공동체를 설계하는 것이 객체지향 설계의 묘미이다.

## 상태와 행동을 함께 지닌 자율적인 객체

객체가 자율적인 존재로 남기 위해서는 필요한 **행동**과 **상태**를 지녀야한다.

### 객체의 자율성

- 사적인 부분은 스스로 관리하고, 외부에서 간섭할 수 없게 **차단**해야한다.
- **접근이 허락된 수단**을 통해서만 의사소통 해야한다.
- 다른 객체가 **무엇(what)**을 수행하는 지는 알 수 있지만, **어떻게(how)** 수행하는지는 몰라야한다.

### 객체의 상태와 행동

- 행동을 위해 필요한 상태를 포함한다.
    - ex. 바리스타는 커피 제조 방법을 기억한다.
- 행동을 하되, 수행 방법은 스스로 결정한다.
    - ex. 바리스타는 자신이 알고 있는 제조법에 따라 커피를 만든다.

### 전통 개발 방법 vs 객체지향

- 전통 개발 방법
    - 데이터, 프로세스를 엄격하게 구분한다.
- 객체지향
    - 데이터, 프로세스를 **객체**라는 하나의 틀 안에 묶어놓음으로써 **객체의 자율성**을 보장한다.

## 협력과 메세지

### 메시지

한 객체가 다른 객체에게 요청하는 의사소통 수단

### 협력의 구성

메시지를 전송하는 객체(**송신자**)와 메시지를 수신하는 객체(**수신자**) 사이의 관계로 구성

## 메서드와 자율성

### 메서드

수신된 메시지를 처리하는 방법

메시지를 수신한 객체가 실행 시간에 메서드를  선택할 수 있다. (절차지향과 다름)

### 객체의 자율성

메시지와 메서드를 분리하는 것은 객체의 자율성을 높이는 핵심 메커니즘이다. 캡슐화와도 연관되어있다.

# 객체지향의 본질

- 객체지향
    - 시스템을 상호작용하는 **자율적인 객체들의 공동체**로 바라보고, 객체를 이용해 시스템을 분할하는 방법
- 객체
    - 자율적인 객체는 **상태**와 **행위**를 함께 지니며 스스로 자기 자신을 책임지는 객체를 의미한다.
    - 객체는 다른 객체와 **협력**한다. 협력 내에서 각자 정해진 **역할**을 수행하고, 역할은 **책임**의 집합이다.
- 메시지
    - 다른 객체와 협력하기 위해 전송한다. **메서드**는 자율적으로 선택한다.

## 객체를 지향하라

클래스를 지향하는 것이 아닌, 객체를 지향해야한다.

클래스는 객체지향에서 중요한 구성요소이지만, 핵심이 아니다. 객체들의 협력 관계를 코드로 옮기는 도구일 뿐이다.

**적절한 책임을 수행하는 역할 간의 유연하고 견고한 협력 관계를 구축하는 것**이 핵심이다.