- [주니온 박사님 강의](https://www.inflearn.com/course/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-%EA%B3%B5%EB%A3%A1%EC%B1%85-%EC%A0%84%EA%B3%B5%EA%B0%95%EC%9D%98#curriculum) 중 Chapter 8에 대한 정리

# Chapter 8
## 데드락(교착 상태)이란?
- 프로세스 세트의 모든 프로세스가 해당 세트의 다른 프로세스에 의해서만 발생할 수 있는 이벤트를 기다리는 상황
- 요청한 리소스가 다른 대기 스레드(또는 프로세스)에 의해 보유되기 때문에 대기 스레드(또는 프로세스)가 다시는 상태를 변경하지 않는 상황

## 데드락 문제를 처리하는 세 가지 방법
- 문제를 무시하고 시스템에서 데드락이 발생하지 않는 것처럼 가장한다.
- 프로토콜을 사용하여 교착 상태를 방지하거나 방지하여 시스템이 데드락에 빠지지 않도록 한다.
- 시스템이 데드락 상태가 될 수 있도록 허용한 다음 이를 탐지하고 복구한다.

## 데드락 상태 방지
데드락이 발생하려면 다음 네 가지 필요 조건이 각각 유지되어야 한다. 따라서 이러한 조건 중 하나 이상이 유지되지 않도록 함으로써 발생하는 것을 방지할 수 있다.

### 필수 조건

1. 상호 제외:
- 하나 이상의 리소스가 비공유 모드로 보유되어 있음
2. 보류 및 대기:
- 스레드는 적어도 하나의 리소스를 보유하고 있으며 다른 스레드가 보유한 추가 리소스를 획득하기 위해 대기 중
3. 선취권 없음:
- 리소스를 선점할 수 없음
4. 순환 대기:
- circular 형태의 대기 상황

### 데드락 방지의 단점
디바이스 이용률이 낮아지고 시스템 처리량이 감소할 수 있다.

## 데드락 방지
- 시스템이 각 요청에 대해 스레드가 대기할지 여부를 결정하여 향후 데드락을 방지할 수 있다. 
- 리소스를 요청하는 방법에 대한 추가 정보가 필요하다.
- 예를 들어 리소스 R1 및 R2가 있는 시스템에서 스레드 P는 R1를 먼저 요청한 다음 R2를 요청하고 해제한다. 스레드 Q는 R2를 요청한 다음 R1를 요청한다.

### 선행 정보가 주어지면,
- 시스템이 데드락에 빠지지 않도록 보장하는 알고리즘을 구성할 수 있다.

## 안전 상태
- 시스템이 교착상태를 피하면서 스레드에게 리소스를 할당할 수 있는 상태다.
- 데드락은 안전하지 않은 상태이며 안전한 상태를 유지하기 위한 회피 알고리즘을 사용하여 시스템이 항상 안전한 상태에 있도록 할 수 있다.
- 스레드가 리소스를 요청할 때 시스템을 안전한 상태로 유지한다면 요청이 승인된다.

## 은행인 알고리즘(Banker's Algorithm)
- RAG(Resource-Allocation Graph)는 각 리소스 유형에 여러 개의 인스턴스가 있는 리소스 할당 시스템에 적용할 수 없다.
- 그러나 은행인 알고리즘은 RAG보다 효율성이 떨어지고 복잡하다.
- 은행인 알고리즘을 사용하는 이유는 은행은 자신의 가용 현금을 모든 고객의 요구를 충족시킬 수 없게 할 방식으로 할당하지 않기 때문이다.
